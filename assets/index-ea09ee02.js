var ze=Object.defineProperty;var Ie=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var D=(e,t,n)=>(Ie(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function x(){}function Te(e){return e()}function he(){return Object.create(null)}function U(e){e.forEach(Te)}function Se(e){return typeof e=="function"}function I(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Je(e){return Object.keys(e).length===0}function w(e,t){e.appendChild(t)}function J(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function Xe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function K(e){return document.createTextNode(e)}function q(){return K(" ")}function Y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let z;function G(e){z=e}function $e(){if(!z)throw new Error("Function called outside component initialization");return z}function Ye(e){$e().$$.on_mount.push(e)}function Ze(e){$e().$$.on_destroy.push(e)}const B=[],ue=[];let F=[];const ae=[],Qe=Promise.resolve();let se=!1;function We(){se||(se=!0,Qe.then(Ee))}function ce(e){F.push(e)}function et(e){ae.push(e)}const ne=new Set;let L=0;function Ee(){if(L!==0)return;const e=z;do{try{for(;L<B.length;){const t=B[L];L++,G(t),tt(t.$$)}}catch(t){throw B.length=0,L=0,t}for(G(null),B.length=0,L=0;ue.length;)ue.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];ne.has(n)||(ne.add(n),n())}F.length=0}while(B.length);for(;ae.length;)ae.pop()();se=!1,ne.clear(),G(e)}function tt(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ce)}}function nt(e){const t=[],n=[];F.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),F=t}const W=new Set;let P;function rt(){P={r:0,c:[],p:P}}function ot(){P.r||U(P.c),P=P.p}function A(e,t){e&&e.i&&(W.delete(e),e.i(t))}function E(e,t,n,o){if(e&&e.o){if(W.has(e))return;W.add(e),P.c.push(()=>{W.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function it(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function R(e){e&&e.c()}function O(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),ce(()=>{const i=e.$$.on_mount.map(Te).filter(Se);e.$$.on_destroy?e.$$.on_destroy.push(...i):U(i),e.$$.on_mount=[]}),r.forEach(ce)}function j(e,t){const n=e.$$;n.fragment!==null&&(nt(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(e,t){e.$$.dirty[0]===-1&&(B.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(e,t,n,o,r,i,c,a=[-1]){const u=z;G(e);const s=e.$$={fragment:null,ctx:[],props:i,update:x,not_equal:r,bound:he(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:he(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};c&&c(s.root);let d=!1;if(s.ctx=n?n(e,t.props||{},(f,l,...m)=>{const h=m.length?m[0]:l;return s.ctx&&r(s.ctx[f],s.ctx[f]=h)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](h),d&&ut(e,f)),l}):[],s.update(),d=!0,U(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const f=He(t.target);s.fragment&&s.fragment.l(f),f.forEach(C)}else s.fragment&&s.fragment.c();t.intro&&A(e.$$.fragment),O(e,t.target,t.anchor),Ee()}G(u)}class H{constructor(){D(this,"$$");D(this,"$$set")}$destroy(){j(this,1),this.$destroy=x}$on(t,n){if(!Se(n))return x;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const at="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(at);function st(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})}),n}var Me={exports:{}},xe={exports:{}};function ct(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function lt(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=n.length,r=t?Math.ceil((o*3+1>>2)/t)*t:o*3+1>>2,i=new Uint8Array(r),c,a,u=0,s=0,d=0;d<o;d++)if(a=d&3,u|=ct(n.charCodeAt(d))<<18-6*a,a===3||o-d===1){for(c=0;c<3&&s<r;c++,s++)i[s]=u>>>(16>>>c&24)&255;u=0}return i}var ft={decode:lt},dt=function(e,t){return new Promise(function(n,o){var r=new XMLHttpRequest;t&&(r.responseType=t),r.open("GET",e),r.onload=function(){r.status===200?n(r.response):o(Error(r.statusText))},r.onerror=function(){o(Error("Network Error"))},r.send()})};(function(e){var t=ft,n=dt;function o(v){return function(p){return typeof p=="string"&&v.test(p)}}function r(v,p){return typeof v=="string"?v+p:typeof v=="function"?v(p):p}function i(v,p,y,b){var N=c(p)?a:u(p)?s:d(p)?f:l(p)?m:h(p)?g:_(p)?te:qe(p)?Fe:Ue(p)?Ce:null,k=y||{};return N?N(v,p,k):b?Promise.resolve(b):Promise.reject("Source not valid ("+p+")")}i.fetch=n;function c(v){return v instanceof ArrayBuffer}function a(v,p,y){return new Promise(function(b,N){v.decodeAudioData(p,function(k){b(k)},function(){N("Can't decode audio data ("+p.slice(0,30)+"...)")})})}var u=o(/\.(mp3|wav|ogg)(\?.*)?$/i);function s(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"arraybuffer"),y)}function d(v){return v&&typeof v.then=="function"}function f(v,p,y){return p.then(function(b){return i(v,b,y)})}var l=Array.isArray;function m(v,p,y){return Promise.all(p.map(function(b){return i(v,b,y,b)}))}function h(v){return v&&typeof v=="object"}function g(v,p,y){var b={},N=Object.keys(p).map(function(k){if(y.only&&y.only.indexOf(k)===-1)return null;var de=p[k];return i(v,de,y,de).then(function(Ge){b[k]=Ge})});return Promise.all(N).then(function(){return b})}var _=o(/\.json(\?.*)?$/i);function te(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"text").then(JSON.parse),y)}var qe=o(/^data:audio/);function Fe(v,p,y){var b=p.indexOf(",");return i(v,t.decode(p.slice(b+1)).buffer,y)}var Ue=o(/\.js(\?.*)?$/i);function Ce(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"text").then(Ke),y)}function Ke(v){var p=v.indexOf("MIDI.Soundfont.");if(p<0)throw Error("Invalid MIDI.js Soundfont format");p=v.indexOf("=",p)+2;var y=v.lastIndexOf(",");return JSON.parse(v.slice(p,y)+"}")}e.exports&&(e.exports=i),typeof window<"u"&&(window.loadAudio=i)})(xe);var ht=xe.exports,ke={exports:{}},mt=pt;function pt(e){var t=e.createGain(),n=t._voltage=yt(e),o=V(n),r=V(n),i=V(n);return t._startAmount=V(r),t._endAmount=V(i),t._multiplier=V(o),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=o.gain,t.startValue=r.gain,t.endValue=i.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,vt),t}var vt={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,n=this._startAmount.gain,o=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var r=this.sustain;t.cancelScheduledValues(e),n.cancelScheduledValues(e),o.cancelScheduledValues(e),o.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),n.setValueAtTime(1,e),n.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),n.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(r,this._decayFrom,pe(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var n=e+this.release;if(this.release){var o=this._multiplier.gain,r=this._startAmount.gain,i=this._endAmount.gain;o.cancelScheduledValues(e),r.cancelScheduledValues(e),i.cancelScheduledValues(e);var c=pe(this.release);if(this.attack&&e<this._decayFrom){var a=bt(0,1,this._startedAt,this._decayFrom,e);o.linearRampToValueAtTime(a,e),r.linearRampToValueAtTime(1-a,e),r.setTargetAtTime(0,e,c)}i.setTargetAtTime(1,e,c),o.setTargetAtTime(0,e,c)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},gt=new Float32Array([1,1]);function yt(e){var t=e.createBufferSource(),n=e.createBuffer(1,2,e.sampleRate);return n.getChannelData(0).set(gt),t.buffer=n,t.loop=!0,t}function V(e){var t=e.context.createGain();return e.connect(t),t}function pe(e){return Math.log(e+1)/Math.log(100)}function bt(e,t,n,o,r){var i=t-e,c=o-n,a=r-n,u=a/c,s=e+u*i;return s<=e&&(s=e),s>=t&&(s=t),s}var _t=mt,wt={},At={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Tt(e,t,n){var o=!1,r=0,i={},c=e.createGain();c.gain.value=1;var a=Object.assign({},At,n),u={context:e,out:c,opts:a};return t instanceof AudioBuffer?u.buffer=t:u.buffers=t,u.start=function(f,l,m){if(u.buffer&&f!==null)return u.start(null,f,l);var h=f?u.buffers[f]:u.buffer;if(h){if(!o){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+f+" not found.");return}var g=m||wt;l=Math.max(e.currentTime,l||0),u.emit("start",l,f,g);var _=d(f,h,g);return _.id=s(f,_),_.env.start(l),_.source.start(l),u.emit("started",l,_.id,_),g.duration&&_.stop(l+g.duration),_},u.play=function(f,l,m){return u.start(f,l,m)},u.stop=function(f,l){var m;return l=l||Object.keys(i),l.map(function(h){return m=i[h],m?(m.stop(f),m.id):null})},u.connect=function(f){return o=!0,c.connect(f),u},u.emit=function(f,l,m,h){u.onevent&&u.onevent(f,l,m,h);var g=u["on"+f];g&&g(l,m,h)},u;function s(f,l){return l.id=r++,i[l.id]=l,l.source.onended=function(){var m=e.currentTime;l.source.disconnect(),l.env.disconnect(),l.disconnect(),u.emit("ended",m,l.id,l)},l.id}function d(f,l,m){var h=e.createGain();return h.gain.value=0,h.connect(c),h.env=$t(e,m,a),h.env.connect(h.gain),h.source=e.createBufferSource(),h.source.buffer=l,h.source.connect(h),h.source.loop=m.loop||a.loop,h.source.playbackRate.value=Et(m.cents||a.cents),h.source.loopStart=m.loopStart||a.loopStart,h.source.loopEnd=m.loopEnd||a.loopEnd,h.stop=function(g){var _=g||e.currentTime;u.emit("stop",_,f);var te=h.env.stop(_);h.source.stop(te)},h}}function ve(e){return typeof e=="number"}var St=["attack","decay","sustain","release"];function $t(e,t,n){var o=_t(e),r=t.adsr||n.adsr;return St.forEach(function(i,c){r?o[i]=r[c]:o[i]=t[i]||n[i]}),o.value.value=ve(t.gain)?t.gain:ve(n.gain)?n.gain:1,o}function Et(e){return e?Math.pow(2,e/1200):1}var Mt=Tt,xt=function(e){return e.on=function(t,n){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var o="on"+t,r=e[o];return e[o]=r?kt(r,n):n,e},e};function kt(e,t){return function(n,o,r,i){e(n,o,r,i),t(n,o,r,i)}}var Pe=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Pt(){return Pe}var Ot=[0,2,4,5,7,9,11];function Oe(e,t,n){if(typeof e!="string")return null;var o=Pe.exec(e);if(!o||!t&&o[4])return null;var r={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length,r.chroma=Ot[r.step]+r.alt,o[3]&&(r.oct=+o[3],r.midi=r.chroma+12*(r.oct+1),r.freq=je(r.midi,n)),t&&(r.tonicOf=o[4]),r}function je(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ne={parse:Oe,regex:Pt,midiToFreq:je},jt=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];jt.forEach(function(e){Ne[e]=function(t){var n=Oe(t);return n&&typeof n[e]<"u"?n[e]:null}});var Nt=Ne,Dt=Nt,Lt=function(e){return e!==null&&e!==[]&&e>=0&&e<129},Vt=function(e){return Lt(e)?+e:Dt.midi(e)},Bt=function(e){if(e.buffers){var t=e.opts.map,n=typeof t=="function"?t:Vt,o=function(i){return i?n(i)||i:null};e.buffers=Rt(e.buffers,o);var r=e.start;e.start=function(i,c,a){var u=o(i),s=u%1;return s&&(u=Math.floor(u),a=Object.assign(a||{},{cents:Math.floor(s*100)})),r(u,c,a)}}return e};function Rt(e,t){return Object.keys(e).reduce(function(n,o){return n[t(o)]=e[o],n},{})}var qt=Array.isArray,Ft=function(e){return e&&typeof e=="object"},Ut={},Ct=function(e){return e.schedule=function(t,n){var o=e.context.currentTime,r=t<o?o:t;e.emit("schedule",r,n);var i,c,a,u;return n.map(function(s){if(s)qt(s)?(i=s[0],c=s[1]):(i=s.time,c=s);else return null;return Ft(c)?(a=c.name||c.key||c.note||c.midi||null,u=c):(a=c,u=Ut),e.start(a,r+(i||0),u)})},e};function Z(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(o,r,i){function c(s,d){if(!r[s]){if(!o[s]){var f=typeof Z=="function"&&Z;if(!d&&f)return f(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var m=r[s]={exports:{}};o[s][0].call(m.exports,function(h){var g=o[s][1][h];return c(g||h)},m,m.exports,n,o,r,i)}return r[s].exports}for(var a=typeof Z=="function"&&Z,u=0;u<i.length;u++)c(i[u]);return c}({1:[function(n,o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(i){function c(a){if(this._event=a,this._data=a.data,this.receivedTime=a.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=a.data[0]&240,this.channel=a.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 144:this.messageType="noteon",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 160:this.messageType="keypressure",this.key=a.data[1]&127,this.pressure=a.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=a.data[1]&127,this.controllerValue=a.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=a.data[1];break;case 208:this.messageType="channelpressure",this.pressure=a.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=a.data[2]&127,s=a.data[1]&127;this.pitchBend=(u<<8)+s;break}}return new c(i)},o.exports=r.default},{}]},{},[1])(1)})})(De);var Kt=De.exports,Gt=Kt,zt=function(e){return e.listenToMidi=function(t,n){var o={},r=n||{},i=r.gain||function(c){return c/127};return t.onmidimessage=function(c){var a=c.messageType?c:Gt(c);if(a.messageType==="noteon"&&a.velocity===0&&(a.messageType="noteoff"),!(r.channel&&a.channel!==r.channel))switch(a.messageType){case"noteon":o[a.key]=e.play(a.key,0,{gain:i(a.velocity)});break;case"noteoff":o[a.key]&&(o[a.key].stop(),delete o[a.key]);break}},e},e};(function(e){var t=Mt,n=xt,o=Bt,r=Ct,i=zt;function c(a,u,s){return i(r(o(n(t(a,u,s)))))}e.exports&&(e.exports=c),typeof window<"u"&&(window.SamplePlayer=c)})(ke);var It=ke.exports;function ge(e,t){return Array(t+1).join(e)}function fe(e){return typeof e=="number"}function Jt(e){return typeof e=="string"}function Xt(e){return typeof e<"u"}function Le(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ve=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Ht(){return Ve}var Yt=[0,2,4,5,7,9,11];function S(e,t,n){if(typeof e!="string")return null;var o=Ve.exec(e);if(!o||!t&&o[4])return null;var r={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length;var i=Yt[r.step]+r.alt;return r.chroma=i<0?12+i:i%12,o[3]&&(r.oct=+o[3],r.midi=i+12*(r.oct+1),r.freq=Le(r.midi,n)),t&&(r.tonicOf=o[4]),r}var Zt="CDEFGAB";function Qt(e){return fe(e)?e<0?ge("b",-e):ge("#",e):""}function Wt(e){return fe(e)?""+e:""}function Be(e,t,n){return e===null||typeof e>"u"?null:e.step?Be(e.step,e.alt,e.oct):e<0||e>6?null:Zt.charAt(e)+Qt(t)+Wt(n)}function Re(e){if((fe(e)||Jt(e))&&e>=0&&e<128)return+e;var t=S(e);return t&&Xt(t.midi)?t.midi:null}function en(e,t){var n=Re(e);return n===null?null:Le(n,t)}function tn(e){return(S(e)||{}).letter}function nn(e){return(S(e)||{}).acc}function rn(e){return(S(e)||{}).pc}function on(e){return(S(e)||{}).step}function un(e){return(S(e)||{}).alt}function an(e){return(S(e)||{}).chroma}function sn(e){return(S(e)||{}).oct}const cn=Object.freeze(Object.defineProperty({__proto__:null,acc:nn,alt:un,build:Be,chroma:an,freq:en,letter:tn,midi:Re,oct:sn,parse:S,pc:rn,regex:Ht,step:on},Symbol.toStringTag,{value:"Module"})),ln=st(cn);var re,ye;function fn(){if(ye)return re;ye=1;var e=ln;function t(r,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(r);this.nameToUrl=i||t.nameToUrl,this.ctx=r,this.instruments={},this.promises=[]}t.prototype.onready=function(r){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(r)},t.prototype.instrument=function(r,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(r=r||"default",r in this.instruments)return this.instruments[r];var a={name:r,play:o(c,i)};if(this.instruments[r]=a,r!=="default"){var u=t.instrument(c,r,i).then(function(s){return a.play=s.play,a});this.promises.push(u),a.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(s)}}else a.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),s()};return a};function n(r,i,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(r,i,c).then(function(a){return a.buffers})}t.loadBuffers=n;function o(r,i){return i=i||{},function(c,a,u,s){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var d=c>0&&c<129?+c:e.midi(c),f=d?e.midiToFreq(d,440):null;if(f){u=u||.2,s=s||{};var l=s.destination||i.destination||r.destination,m=s.vcoType||i.vcoType||"sine",h=s.gain||i.gain||.4,g=r.createOscillator();g.type=m,g.frequency.value=f;var _=r.createGain();return _.gain.value=h,g.connect(_),_.connect(l),g.start(a),u>0&&g.stop(a+u),g}}}return t.noteToMidi=e.midi,re=t,re}(function(e){var t=ht,n=It;function o(a,u,s){if(arguments.length===1)return function(h,g){return o(a,h,g)};var d=s||{},f=d.isSoundfontURL||r,l=d.nameToUrl||i,m=f(u)?u:l(u,d.soundfont,d.format);return t(a,m,{only:d.only||d.notes}).then(function(h){var g=n(a,h,d).connect(d.destination?d.destination:a.destination);return g.url=m,g.name=u,g})}function r(a){return/\.js(\?.*)?$/i.test(a)}function i(a,u,s){return s=s==="ogg"?s:"mp3",u=u==="FluidR3_GM"?u:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+u+"/"+a+"-"+s+".js"}var c=fn();c.instrument=o,c.nameToUrl=i,e.exports&&(e.exports=c),typeof window<"u"&&(window.Soundfont=c)})(Me);var dn=Me.exports;class hn{constructor(t,n){D(this,"sound",null);this.instrument=t,this.note=n}async start(){this.stop(),this.sound=await this.instrument.play(this.note)}stop(){this.sound!=null&&(this.sound.stop(),this.sound=null)}}const be=12*4,oe=49,mn=1.7,le="80px",pn="4px";class vn{constructor(t=()=>{}){D(this,"instrument",null);this.initalizeCallback=t}async play(t){if(this.instrument==null){this.initalizeCallback();let n=new(window.AudioContext||window.webkitAudioContext);this.instrument=await dn.instrument(n,"acoustic_grand_piano");let o=n.createGain();return o.connect(n.destination),this.instrument.connect(o),o.gain.value=mn,null}else return this.instrument.play(t.toString())}}var ee=(e=>(e.major="maj",e.minor="min",e.diminished="dim",e))(ee||{});function gn(e,t){let n=[];switch(t){case"maj":n=[e,e+4,e+7];break;case"min":n=[e,e+3,e+7];break;case"dim":n=[e,e+3,e+6];break}n=n.map(r=>r%12+be);let o=[e%12+be-12];return n.concat(o)}class _e{constructor(t,n,o){D(this,"tones",[]);this.tones=gn(n,o).map(r=>new hn(t,r))}start(){this.tones.forEach(t=>t.start())}stop(){this.tones.forEach(t=>t.stop())}}function yn(e){let t,n,o,r,i,c,a,u,s,d;return{c(){t=M("button"),n=K(e[0]),o=q(),r=M("p"),i=K(e[1]),c=q(),a=M("p"),u=K(e[2]),T(r,"class","descriptionlabel svelte-1gxd3ti"),T(r,"id","topDescriptionLabel"),T(a,"class","descriptionlabel svelte-1gxd3ti"),T(a,"id","bottomDescriptionLabel"),T(t,"class","svelte-1gxd3ti"),$(t,"background-color",e[3]?"#606060":"#404040"),$(t,"width",le),$(t,"height",le),$(t,"margin",pn)},m(f,l){J(f,t,l),w(t,n),w(t,o),w(t,r),w(r,i),w(t,c),w(t,a),w(a,u),s||(d=[Y(t,"pointerenter",e[6]),Y(t,"pointerleave",e[5]),Y(t,"mousedown",e[4]),Y(t,"gotpointercapture",bn)],s=!0)},p(f,[l]){l&1&&Q(n,f[0]),l&2&&Q(i,f[1]),l&4&&Q(u,f[2]),l&8&&$(t,"background-color",f[3]?"#606060":"#404040")},i:x,o:x,d(f){f&&C(t),s=!1,U(d)}}}function bn(e){e.target.releasePointerCapture(e.pointerId)}function _n(e,t,n){let{sound:o}=t,{shortcutKey:r}=t,{label:i}=t,{topDescriptionLabel:c=""}=t,{bottomDescriptionLabel:a=""}=t,u=!1;function s(){n(3,u=!0),o.start()}function d(){n(3,u=!1),o.stop()}function f(){n(3,u=!0),setTimeout(()=>{u&&o.start()},200)}function l(h){h.key===r&&!u&&s()}function m(h){h.key===r&&d()}return Ye(()=>(window.addEventListener("keydown",l),window.addEventListener("keyup",m),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",m),d()})),Ze(()=>{d()}),e.$$set=h=>{"sound"in h&&n(7,o=h.sound),"shortcutKey"in h&&n(8,r=h.shortcutKey),"label"in h&&n(0,i=h.label),"topDescriptionLabel"in h&&n(1,c=h.topDescriptionLabel),"bottomDescriptionLabel"in h&&n(2,a=h.bottomDescriptionLabel)},[i,c,a,u,s,d,f,o,r]}class wn extends H{constructor(t){super(),X(this,t,_n,yn,I,{sound:7,shortcutKey:8,label:0,topDescriptionLabel:1,bottomDescriptionLabel:2})}}function An(e){return(7*(e+3)%12).toString()}function Tn(e){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}function we(e,t,n){const o=e.slice();return o[5]=t[n],o[7]=n,o}function Ae(e){let t,n;return t=new wn({props:{label:An(e[3](e[7])),topDescriptionLabel:Tn(e[3](e[7])),bottomDescriptionLabel:`press ${e[5]}`,sound:new _e(e[2],e[3](e[7]),e[0]),shortcutKey:e[5]}}),{c(){R(t.$$.fragment)},m(o,r){O(t,o,r),n=!0},p(o,r){const i={};r&2&&(i.bottomDescriptionLabel=`press ${o[5]}`),r&5&&(i.sound=new _e(o[2],o[3](o[7]),o[0])),r&2&&(i.shortcutKey=o[5]),t.$set(i)},i(o){n||(A(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){j(t,o)}}}function Sn(e){let t,n,o=e[0].toString()+"",r,i,c,a=me(e[1]),u=[];for(let d=0;d<a.length;d+=1)u[d]=Ae(we(e,a,d));const s=d=>E(u[d],1,1,()=>{u[d]=null});return{c(){t=M("div"),n=M("h1"),r=K(o),i=q();for(let d=0;d<u.length;d+=1)u[d].c();$(n,"width",le),T(t,"class","button-row svelte-tj7c0w")},m(d,f){J(d,t,f),w(t,n),w(n,r),w(t,i);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(t,null);c=!0},p(d,[f]){if((!c||f&1)&&o!==(o=d[0].toString()+"")&&Q(r,o),f&15){a=me(d[1]);let l;for(l=0;l<a.length;l+=1){const m=we(d,a,l);u[l]?(u[l].p(m,f),A(u[l],1)):(u[l]=Ae(m),u[l].c(),A(u[l],1),u[l].m(t,null))}for(rt(),l=a.length;l<u.length;l+=1)s(l);ot()}},i(d){if(!c){for(let f=0;f<a.length;f+=1)A(u[f]);c=!0}},o(d){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)E(u[f]);c=!1},d(d){d&&C(t),Xe(u,d)}}}function $n(e,t,n){let{startTone:o}=t,{chrdType:r}=t,{shortcutKeys:i}=t,{instrument:c}=t;function a(u){return o+7*u}return e.$$set=u=>{"startTone"in u&&n(4,o=u.startTone),"chrdType"in u&&n(0,r=u.chrdType),"shortcutKeys"in u&&n(1,i=u.shortcutKeys),"instrument"in u&&n(2,c=u.instrument)},[r,i,c,a,o]}class ie extends H{constructor(t){super(),X(this,t,$n,Sn,I,{startTone:4,chrdType:0,shortcutKeys:1,instrument:2})}}function En(e){let t;return{c(){t=M("h1"),t.textContent="audio activates...",T(t,"class","svelte-5fc3z"),$(t,"opacity",e[0]?1:0)},m(n,o){J(n,t,o)},p(n,[o]){o&1&&$(t,"opacity",n[0]?1:0)},i:x,o:x,d(n){n&&C(t)}}}function Mn(e,t,n){let{showAudioActivate:o}=t;return e.$$set=r=>{"showAudioActivate"in r&&n(0,o=r.showAudioActivate)},[o]}class xn extends H{constructor(t){super(),X(this,t,Mn,En,I,{showAudioActivate:0})}}function kn(e){let t,n,o,r,i,c,a,u,s,d;function f(m){e[2](m)}let l={};return e[0]!==void 0&&(l.showAudioActivate=e[0]),n=new xn({props:l}),ue.push(()=>it(n,"showAudioActivate",f)),i=new ie({props:{startTone:oe,shortcutKeys:["q","w","e","r","t","z","u","i","o","p","ü"],chrdType:ee.major,instrument:e[1]}}),a=new ie({props:{startTone:oe+9,shortcutKeys:["a","s","d","f","g","h","j","k","l","ö","ä"],chrdType:ee.minor,instrument:e[1]}}),s=new ie({props:{startTone:oe+2*9,shortcutKeys:["y","x","c","v","b","n","m",",",".","-","_"],chrdType:ee.diminished,instrument:e[1]}}),{c(){t=M("main"),R(n.$$.fragment),r=q(),R(i.$$.fragment),c=q(),R(a.$$.fragment),u=q(),R(s.$$.fragment),T(t,"class","svelte-10qjjto")},m(m,h){J(m,t,h),O(n,t,null),w(t,r),O(i,t,null),w(t,c),O(a,t,null),w(t,u),O(s,t,null),d=!0},p(m,[h]){const g={};!o&&h&1&&(o=!0,g.showAudioActivate=m[0],et(()=>o=!1)),n.$set(g)},i(m){d||(A(n.$$.fragment,m),A(i.$$.fragment,m),A(a.$$.fragment,m),A(s.$$.fragment,m),d=!0)},o(m){E(n.$$.fragment,m),E(i.$$.fragment,m),E(a.$$.fragment,m),E(s.$$.fragment,m),d=!1},d(m){m&&C(t),j(n),j(i),j(a),j(s)}}}function Pn(e,t,n){let o=!1;function r(){n(0,o=!0),setTimeout(()=>{n(0,o=!1)},1e3)}let i=new vn(r);function c(a){o=a,n(0,o)}return[o,i,c]}class On extends H{constructor(t){super(),X(this,t,Pn,kn,I,{})}}function jn(e){let t,n,o;return n=new On({}),{c(){t=M("main"),R(n.$$.fragment),T(t,"class","svelte-zs3zob")},m(r,i){J(r,t,i),O(n,t,null),o=!0},p:x,i(r){o||(A(n.$$.fragment,r),o=!0)},o(r){E(n.$$.fragment,r),o=!1},d(r){r&&C(t),j(n)}}}class Nn extends H{constructor(t){super(),X(this,t,null,jn,I,{})}}getComputedStyle(document.body).getPropertyValue("background-color");new Nn({target:document.body});
