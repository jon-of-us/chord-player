var nt=Object.defineProperty;var rt=(e,t,n)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(rt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function S(){}function Ee(e){return e()}function pe(){return Object.create(null)}function X(e){e.forEach(Ee)}function De(e){return typeof e=="function"}function O(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ot(e){return Object.keys(e).length===0}function it(e,...t){if(e==null){for(const r of t)r(void 0);return S}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ke(e,t,n){e.$$.on_destroy.push(it(t,n))}function A(e,t){e.appendChild(t)}function R(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function st(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function D(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function V(){return I(" ")}function ut(){return I("")}function W(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function at(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function P(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let Y;function H(e){Y=e}function Pe(){if(!Y)throw new Error("Function called outside component initialization");return Y}function Le(e){Pe().$$.on_mount.push(e)}function ct(e){Pe().$$.on_destroy.push(e)}const z=[],ne=[];let J=[];const le=[],lt=Promise.resolve();let fe=!1;function ft(){fe||(fe=!0,lt.then(je))}function re(e){J.push(e)}function Oe(e){le.push(e)}const se=new Set;let K=0;function je(){if(K!==0)return;const e=Y;do{try{for(;K<z.length;){const t=z[K];K++,H(t),dt(t.$$)}}catch(t){throw z.length=0,K=0,t}for(H(null),z.length=0,K=0;ne.length;)ne.pop()();for(let t=0;t<J.length;t+=1){const n=J[t];se.has(n)||(se.add(n),n())}J.length=0}while(z.length);for(;le.length;)le.pop()();fe=!1,se.clear(),H(e)}function dt(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function ht(e){const t=[],n=[];J.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),J=t}const ee=new Set;let x;function Ne(){x={r:0,c:[],p:x}}function xe(){x.r||X(x.c),x=x.p}function w(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function T(e,t,n,r){if(e&&e.o){if(ee.has(e))return;ee.add(e),x.c.push(()=>{ee.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ve(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ve(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function L(e){e&&e.c()}function M(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),re(()=>{const i=e.$$.on_mount.map(Ee).filter(De);e.$$.on_destroy?e.$$.on_destroy.push(...i):X(i),e.$$.on_mount=[]}),o.forEach(re)}function E(e,t){const n=e.$$;n.fragment!==null&&(ht(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(z.push(e),ft(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(e,t,n,r,o,i,a,s=[-1]){const c=Y;H(e);const u=e.$$={fragment:null,ctx:[],props:i,update:S,not_equal:o,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:pe(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};a&&a(u.root);let m=!1;if(u.ctx=n?n(e,t.props||{},(f,l,...d)=>{const h=d.length?d[0]:l;return u.ctx&&o(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),m&&mt(e,f)),l}):[],u.update(),m=!0,X(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const f=at(t.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();t.intro&&w(e.$$.fragment),M(e,t.target,t.anchor),je()}H(c)}class q{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){E(this,1),this.$destroy=S}$on(t,n){if(!De(n))return S;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pt);function vt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Re={exports:{}},Be={exports:{}};function gt(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function yt(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,o=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,i=new Uint8Array(o),a,s,c=0,u=0,m=0;m<r;m++)if(s=m&3,c|=gt(n.charCodeAt(m))<<18-6*s,s===3||r-m===1){for(a=0;a<3&&u<o;a++,u++)i[u]=c>>>(16>>>a&24)&255;c=0}return i}var bt={decode:yt},_t=function(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;t&&(o.responseType=t),o.open("GET",e),o.onload=function(){o.status===200?n(o.response):r(Error(o.statusText))},o.onerror=function(){r(Error("Network Error"))},o.send()})};(function(e){var t=bt,n=_t;function r(g){return function(v){return typeof v=="string"&&g.test(v)}}function o(g,v){return typeof g=="string"?g+v:typeof g=="function"?g(v):v}function i(g,v,y,b){var F=a(v)?s:c(v)?u:m(v)?f:l(v)?d:h(v)?p:_(v)?ie:He(v)?Ye:Ze(v)?Qe:null,N=y||{};return F?F(g,v,N):b?Promise.resolve(b):Promise.reject("Source not valid ("+v+")")}i.fetch=n;function a(g){return g instanceof ArrayBuffer}function s(g,v,y){return new Promise(function(b,F){g.decodeAudioData(v,function(N){b(N)},function(){F("Can't decode audio data ("+v.slice(0,30)+"...)")})})}var c=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function u(g,v,y){var b=o(y.from,v);return i(g,i.fetch(b,"arraybuffer"),y)}function m(g){return g&&typeof g.then=="function"}function f(g,v,y){return v.then(function(b){return i(g,b,y)})}var l=Array.isArray;function d(g,v,y){return Promise.all(v.map(function(b){return i(g,b,y,b)}))}function h(g){return g&&typeof g=="object"}function p(g,v,y){var b={},F=Object.keys(v).map(function(N){if(y.only&&y.only.indexOf(N)===-1)return null;var me=v[N];return i(g,me,y,me).then(function(tt){b[N]=tt})});return Promise.all(F).then(function(){return b})}var _=r(/\.json(\?.*)?$/i);function ie(g,v,y){var b=o(y.from,v);return i(g,i.fetch(b,"text").then(JSON.parse),y)}var He=r(/^data:audio/);function Ye(g,v,y){var b=v.indexOf(",");return i(g,t.decode(v.slice(b+1)).buffer,y)}var Ze=r(/\.js(\?.*)?$/i);function Qe(g,v,y){var b=o(y.from,v);return i(g,i.fetch(b,"text").then(et),y)}function et(g){var v=g.indexOf("MIDI.Soundfont.");if(v<0)throw Error("Invalid MIDI.js Soundfont format");v=g.indexOf("=",v)+2;var y=g.lastIndexOf(",");return JSON.parse(g.slice(v,y)+"}")}e.exports&&(e.exports=i),typeof window<"u"&&(window.loadAudio=i)})(Be);var wt=Be.exports,qe={exports:{}},At=Tt;function Tt(e){var t=e.createGain(),n=t._voltage=Mt(e),r=C(n),o=C(n),i=C(n);return t._startAmount=C(o),t._endAmount=C(i),t._multiplier=C(r),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=r.gain,t.startValue=o.gain,t.endValue=i.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,St),t}var St={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,n=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var o=this.sustain;t.cancelScheduledValues(e),n.cancelScheduledValues(e),r.cancelScheduledValues(e),r.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),n.setValueAtTime(1,e),n.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),n.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(o,this._decayFrom,ge(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var n=e+this.release;if(this.release){var r=this._multiplier.gain,o=this._startAmount.gain,i=this._endAmount.gain;r.cancelScheduledValues(e),o.cancelScheduledValues(e),i.cancelScheduledValues(e);var a=ge(this.release);if(this.attack&&e<this._decayFrom){var s=Et(0,1,this._startedAt,this._decayFrom,e);r.linearRampToValueAtTime(s,e),o.linearRampToValueAtTime(1-s,e),o.setTargetAtTime(0,e,a)}i.setTargetAtTime(1,e,a),r.setTargetAtTime(0,e,a)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},$t=new Float32Array([1,1]);function Mt(e){var t=e.createBufferSource(),n=e.createBuffer(1,2,e.sampleRate);return n.getChannelData(0).set($t),t.buffer=n,t.loop=!0,t}function C(e){var t=e.context.createGain();return e.connect(t),t}function ge(e){return Math.log(e+1)/Math.log(100)}function Et(e,t,n,r,o){var i=t-e,a=r-n,s=o-n,c=s/a,u=e+c*i;return u<=e&&(u=e),u>=t&&(u=t),u}var Dt=At,kt={},Pt={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Lt(e,t,n){var r=!1,o=0,i={},a=e.createGain();a.gain.value=1;var s=Object.assign({},Pt,n),c={context:e,out:a,opts:s};return t instanceof AudioBuffer?c.buffer=t:c.buffers=t,c.start=function(f,l,d){if(c.buffer&&f!==null)return c.start(null,f,l);var h=f?c.buffers[f]:c.buffer;if(h){if(!r){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+f+" not found.");return}var p=d||kt;l=Math.max(e.currentTime,l||0),c.emit("start",l,f,p);var _=m(f,h,p);return _.id=u(f,_),_.env.start(l),_.source.start(l),c.emit("started",l,_.id,_),p.duration&&_.stop(l+p.duration),_},c.play=function(f,l,d){return c.start(f,l,d)},c.stop=function(f,l){var d;return l=l||Object.keys(i),l.map(function(h){return d=i[h],d?(d.stop(f),d.id):null})},c.connect=function(f){return r=!0,a.connect(f),c},c.emit=function(f,l,d,h){c.onevent&&c.onevent(f,l,d,h);var p=c["on"+f];p&&p(l,d,h)},c;function u(f,l){return l.id=o++,i[l.id]=l,l.source.onended=function(){var d=e.currentTime;l.source.disconnect(),l.env.disconnect(),l.disconnect(),c.emit("ended",d,l.id,l)},l.id}function m(f,l,d){var h=e.createGain();return h.gain.value=0,h.connect(a),h.env=jt(e,d,s),h.env.connect(h.gain),h.source=e.createBufferSource(),h.source.buffer=l,h.source.connect(h),h.source.loop=d.loop||s.loop,h.source.playbackRate.value=Nt(d.cents||s.cents),h.source.loopStart=d.loopStart||s.loopStart,h.source.loopEnd=d.loopEnd||s.loopEnd,h.stop=function(p){var _=p||e.currentTime;c.emit("stop",_,f);var ie=h.env.stop(_);h.source.stop(ie)},h}}function ye(e){return typeof e=="number"}var Ot=["attack","decay","sustain","release"];function jt(e,t,n){var r=Dt(e),o=t.adsr||n.adsr;return Ot.forEach(function(i,a){o?r[i]=o[a]:r[i]=t[i]||n[i]}),r.value.value=ye(t.gain)?t.gain:ye(n.gain)?n.gain:1,r}function Nt(e){return e?Math.pow(2,e/1200):1}var xt=Lt,Vt=function(e){return e.on=function(t,n){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var r="on"+t,o=e[r];return e[r]=o?Rt(o,n):n,e},e};function Rt(e,t){return function(n,r,o,i){e(n,r,o,i),t(n,r,o,i)}}var Fe=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Bt(){return Fe}var qt=[0,2,4,5,7,9,11];function Ue(e,t,n){if(typeof e!="string")return null;var r=Fe.exec(e);if(!r||!t&&r[4])return null;var o={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};return o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length,o.chroma=qt[o.step]+o.alt,r[3]&&(o.oct=+r[3],o.midi=o.chroma+12*(o.oct+1),o.freq=Ke(o.midi,n)),t&&(o.tonicOf=r[4]),o}function Ke(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ce={parse:Ue,regex:Bt,midiToFreq:Ke},Ft=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Ft.forEach(function(e){Ce[e]=function(t){var n=Ue(t);return n&&typeof n[e]<"u"?n[e]:null}});var Ut=Ce,Kt=Ut,Ct=function(e){return e!==null&&e!==[]&&e>=0&&e<129},Gt=function(e){return Ct(e)?+e:Kt.midi(e)},zt=function(e){if(e.buffers){var t=e.opts.map,n=typeof t=="function"?t:Gt,r=function(i){return i?n(i)||i:null};e.buffers=It(e.buffers,r);var o=e.start;e.start=function(i,a,s){var c=r(i),u=c%1;return u&&(c=Math.floor(c),s=Object.assign(s||{},{cents:Math.floor(u*100)})),o(c,a,s)}}return e};function It(e,t){return Object.keys(e).reduce(function(n,r){return n[t(r)]=e[r],n},{})}var Jt=Array.isArray,Xt=function(e){return e&&typeof e=="object"},Wt={},Ht=function(e){return e.schedule=function(t,n){var r=e.context.currentTime,o=t<r?r:t;e.emit("schedule",o,n);var i,a,s,c;return n.map(function(u){if(u)Jt(u)?(i=u[0],a=u[1]):(i=u.time,a=u);else return null;return Xt(a)?(s=a.name||a.key||a.note||a.midi||null,c=a):(s=a,c=Wt),e.start(s,o+(i||0),c)})},e};function Z(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ge={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,o,i){function a(u,m){if(!o[u]){if(!r[u]){var f=typeof Z=="function"&&Z;if(!m&&f)return f(u,!0);if(s)return s(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[u]={exports:{}};r[u][0].call(d.exports,function(h){var p=r[u][1][h];return a(p||h)},d,d.exports,n,r,o,i)}return o[u].exports}for(var s=typeof Z=="function"&&Z,c=0;c<i.length;c++)a(i[c]);return a}({1:[function(n,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){function a(s){if(this._event=s,this._data=s.data,this.receivedTime=s.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=s.data[0]&240,this.channel=s.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 144:this.messageType="noteon",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 160:this.messageType="keypressure",this.key=s.data[1]&127,this.pressure=s.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=s.data[1]&127,this.controllerValue=s.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=s.data[1];break;case 208:this.messageType="channelpressure",this.pressure=s.data[1]&127;break;case 224:this.messageType="pitchbendchange";var c=s.data[2]&127,u=s.data[1]&127;this.pitchBend=(c<<8)+u;break}}return new a(i)},r.exports=o.default},{}]},{},[1])(1)})})(Ge);var Yt=Ge.exports,Zt=Yt,Qt=function(e){return e.listenToMidi=function(t,n){var r={},o=n||{},i=o.gain||function(a){return a/127};return t.onmidimessage=function(a){var s=a.messageType?a:Zt(a);if(s.messageType==="noteon"&&s.velocity===0&&(s.messageType="noteoff"),!(o.channel&&s.channel!==o.channel))switch(s.messageType){case"noteon":r[s.key]=e.play(s.key,0,{gain:i(s.velocity)});break;case"noteoff":r[s.key]&&(r[s.key].stop(),delete r[s.key]);break}},e},e};(function(e){var t=xt,n=Vt,r=zt,o=Ht,i=Qt;function a(s,c,u){return i(o(r(n(t(s,c,u)))))}e.exports&&(e.exports=a),typeof window<"u"&&(window.SamplePlayer=a)})(qe);var en=qe.exports;function be(e,t){return Array(t+1).join(e)}function he(e){return typeof e=="number"}function tn(e){return typeof e=="string"}function nn(e){return typeof e<"u"}function ze(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ie=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function rn(){return Ie}var on=[0,2,4,5,7,9,11];function k(e,t,n){if(typeof e!="string")return null;var r=Ie.exec(e);if(!r||!t&&r[4])return null;var o={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length;var i=on[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,r[3]&&(o.oct=+r[3],o.midi=i+12*(o.oct+1),o.freq=ze(o.midi,n)),t&&(o.tonicOf=r[4]),o}var sn="CDEFGAB";function un(e){return he(e)?e<0?be("b",-e):be("#",e):""}function an(e){return he(e)?""+e:""}function Je(e,t,n){return e===null||typeof e>"u"?null:e.step?Je(e.step,e.alt,e.oct):e<0||e>6?null:sn.charAt(e)+un(t)+an(n)}function Xe(e){if((he(e)||tn(e))&&e>=0&&e<128)return+e;var t=k(e);return t&&nn(t.midi)?t.midi:null}function cn(e,t){var n=Xe(e);return n===null?null:ze(n,t)}function ln(e){return(k(e)||{}).letter}function fn(e){return(k(e)||{}).acc}function dn(e){return(k(e)||{}).pc}function hn(e){return(k(e)||{}).step}function mn(e){return(k(e)||{}).alt}function pn(e){return(k(e)||{}).chroma}function vn(e){return(k(e)||{}).oct}const gn=Object.freeze(Object.defineProperty({__proto__:null,acc:fn,alt:mn,build:Je,chroma:pn,freq:cn,letter:ln,midi:Xe,oct:vn,parse:k,pc:dn,regex:rn,step:hn},Symbol.toStringTag,{value:"Module"})),yn=vt(gn);var ue,_e;function bn(){if(_e)return ue;_e=1;var e=yn;function t(o,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(o);this.nameToUrl=i||t.nameToUrl,this.ctx=o,this.instruments={},this.promises=[]}t.prototype.onready=function(o){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(o)},t.prototype.instrument=function(o,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var a=this.ctx;if(o=o||"default",o in this.instruments)return this.instruments[o];var s={name:o,play:r(a,i)};if(this.instruments[o]=s,o!=="default"){var c=t.instrument(a,o,i).then(function(u){return s.play=u.play,s});this.promises.push(c),s.onready=function(u){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),c.then(u)}}else s.onready=function(u){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u()};return s};function n(o,i,a){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(o,i,a).then(function(s){return s.buffers})}t.loadBuffers=n;function r(o,i){return i=i||{},function(a,s,c,u){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var m=a>0&&a<129?+a:e.midi(a),f=m?e.midiToFreq(m,440):null;if(f){c=c||.2,u=u||{};var l=u.destination||i.destination||o.destination,d=u.vcoType||i.vcoType||"sine",h=u.gain||i.gain||.4,p=o.createOscillator();p.type=d,p.frequency.value=f;var _=o.createGain();return _.gain.value=h,p.connect(_),_.connect(l),p.start(s),c>0&&p.stop(s+c),p}}}return t.noteToMidi=e.midi,ue=t,ue}(function(e){var t=wt,n=en;function r(s,c,u){if(arguments.length===1)return function(h,p){return r(s,h,p)};var m=u||{},f=m.isSoundfontURL||o,l=m.nameToUrl||i,d=f(c)?c:l(c,m.soundfont,m.format);return t(s,d,{only:m.only||m.notes}).then(function(h){var p=n(s,h,m).connect(m.destination?m.destination:s.destination);return p.url=d,p.name=c,p})}function o(s){return/\.js(\?.*)?$/i.test(s)}function i(s,c,u){return u=u==="ogg"?u:"mp3",c=c==="FluidR3_GM"?c:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+c+"/"+s+"-"+u+".js"}var a=bn();a.instrument=r,a.nameToUrl=i,e.exports&&(e.exports=a),typeof window<"u"&&(window.Soundfont=a)})(Re);var _n=Re.exports;class wn{constructor(t,n){U(this,"sound",null);this.instrument=t,this.note=n}async start(){this.stop(),this.sound=await this.instrument.play(this.note)}stop(){this.sound!=null&&(this.sound.stop(),this.sound=null)}}const we=12*4,ae=49,An=1.7;function Ae(e){return parseInt(e.slice(0,-2))}const oe="80px",We="4px";class Tn{constructor(t=()=>{}){U(this,"instrument",null);this.initalizeCallback=t}async play(t){if(this.instrument==null){this.initalizeCallback();let n=new(window.AudioContext||window.webkitAudioContext);this.instrument=await _n.instrument(n,"acoustic_grand_piano");let r=n.createGain();return r.connect(n.destination),this.instrument.connect(r),r.gain.value=An,null}else return this.instrument.play(t.toString())}}var te=(e=>(e.major="maj",e.minor="min",e.diminished="dim",e))(te||{});function Sn(e,t){let n=[];switch(t){case"maj":n=[e,e+4,e+7];break;case"min":n=[e,e+3,e+7];break;case"dim":n=[e,e+3,e+6];break}n=n.map(o=>o%12+we);let r=[e%12+we-12];return n.concat(r)}class Te{constructor(t,n,r){U(this,"tones",[]);this.tones=Sn(n,r).map(o=>new wn(t,o))}start(){this.tones.forEach(t=>t.start())}stop(){this.tones.forEach(t=>t.stop())}}const G=[];function $n(e,t=S){let n;const r=new Set;function o(s){if(O(e,s)&&(e=s,n)){const c=!G.length;for(const u of r)u[1](),G.push(u,e);if(c){for(let u=0;u<G.length;u+=2)G[u][0](G[u+1]);G.length=0}}}function i(s){o(s(e))}function a(s,c=S){const u=[s,c];return r.add(u),r.size===1&&(n=t(o,i)||S),s(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:a}}const de=$n({mouse:{isDown:!1}});function Mn(e){let t,n,r,o,i,a,s,c,u,m;return{c(){t=D("button"),n=I(e[0]),r=V(),o=D("p"),i=I(e[1]),a=V(),s=D("p"),c=I(e[2]),$(o,"class","descriptionlabel svelte-12fjv3s"),$(o,"id","topDescriptionLabel"),$(s,"class","descriptionlabel svelte-12fjv3s"),$(s,"id","bottomDescriptionLabel"),$(t,"class","svelte-12fjv3s"),P(t,"background-color",e[3]?"#606060":"#404040"),P(t,"width",oe),P(t,"height",oe),P(t,"margin",We)},m(f,l){R(f,t,l),A(t,n),A(t,r),A(t,o),A(o,i),A(t,a),A(t,s),A(s,c),u||(m=[W(t,"pointerdown",e[4]),W(t,"mousemove",e[6]),W(t,"pointerleave",e[5]),W(t,"pointerup",e[5])],u=!0)},p(f,[l]){l&1&&Q(n,f[0]),l&2&&Q(i,f[1]),l&4&&Q(c,f[2]),l&8&&P(t,"background-color",f[3]?"#606060":"#404040")},i:S,o:S,d(f){f&&j(t),u=!1,X(m)}}}function En(e,t,n){let r;ke(e,de,p=>n(9,r=p));let{sound:o}=t,{shortcutKey:i}=t,{label:a}=t,{topDescriptionLabel:s=""}=t,{bottomDescriptionLabel:c=""}=t,u=!1;function m(){n(3,u=!0),o.start()}function f(){n(3,u=!1),o.stop()}function l(){r.mouse.isDown&&!u&&(n(3,u=!0),setTimeout(()=>{u&&m()},200))}function d(p){p.key===i&&!u&&m()}function h(p){p.key===i&&f()}return Le(()=>(window.addEventListener("keydown",d),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",h),f()})),ct(()=>{f()}),e.$$set=p=>{"sound"in p&&n(7,o=p.sound),"shortcutKey"in p&&n(8,i=p.shortcutKey),"label"in p&&n(0,a=p.label),"topDescriptionLabel"in p&&n(1,s=p.topDescriptionLabel),"bottomDescriptionLabel"in p&&n(2,c=p.bottomDescriptionLabel)},[a,s,c,u,m,f,l,o,i]}class Dn extends q{constructor(t){super(),B(this,t,En,Mn,O,{sound:7,shortcutKey:8,label:0,topDescriptionLabel:1,bottomDescriptionLabel:2})}}function kn(e){return(7*(e+3)%12).toString()}function Pn(e){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}function Se(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function $e(e){let t,n;return t=new Dn({props:{label:kn(e[5](e[10])),topDescriptionLabel:Pn(e[5](e[10])),bottomDescriptionLabel:`press ${e[8]}`,sound:new Te(e[2],e[5](e[10]),e[0]),shortcutKey:e[8]}}),{c(){L(t.$$.fragment)},m(r,o){M(t,r,o),n=!0},p(r,o){const i={};o&2&&(i.bottomDescriptionLabel=`press ${r[8]}`),o&5&&(i.sound=new Te(r[2],r[5](r[10]),r[0])),o&2&&(i.shortcutKey=r[8]),t.$set(i)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){E(t,r)}}}function Me(e){let t,n,r=e[10]<e[4]-1&&$e(e);return{c(){r&&r.c(),t=ut()},m(o,i){r&&r.m(o,i),R(o,t,i),n=!0},p(o,i){o[10]<o[4]-1?r?(r.p(o,i),i&16&&w(r,1)):(r=$e(o),r.c(),w(r,1),r.m(t.parentNode,t)):r&&(Ne(),T(r,1,1,()=>{r=null}),xe())},i(o){n||(w(r),n=!0)},o(o){T(r),n=!1},d(o){o&&j(t),r&&r.d(o)}}}function Ln(e){let t,n,r=e[0].toString()+"",o,i,a,s,c;re(e[7]);let u=ve(e[1]),m=[];for(let l=0;l<u.length;l+=1)m[l]=Me(Se(e,u,l));const f=l=>T(m[l],1,1,()=>{m[l]=null});return{c(){t=D("div"),n=D("h1"),o=I(r),i=V();for(let l=0;l<m.length;l+=1)m[l].c();P(n,"width",oe),$(t,"class","button-row svelte-14vrr43")},m(l,d){R(l,t,d),A(t,n),A(n,o),A(t,i);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(t,null);a=!0,s||(c=W(window,"resize",e[7]),s=!0)},p(l,[d]){if((!a||d&1)&&r!==(r=l[0].toString()+"")&&Q(o,r),d&55){u=ve(l[1]);let h;for(h=0;h<u.length;h+=1){const p=Se(l,u,h);m[h]?(m[h].p(p,d),w(m[h],1)):(m[h]=Me(p),m[h].c(),w(m[h],1),m[h].m(t,null))}for(Ne(),h=u.length;h<m.length;h+=1)f(h);xe()}},i(l){if(!a){for(let d=0;d<u.length;d+=1)w(m[d]);a=!0}},o(l){m=m.filter(Boolean);for(let d=0;d<m.length;d+=1)T(m[d]);a=!1},d(l){l&&j(t),st(m,l),s=!1,c()}}}function On(e,t,n){let r,o,{startTone:i}=t,{chrdType:a}=t,{shortcutKeys:s}=t,{instrument:c}=t;function u(f){return i+7*f}function m(){n(3,r=window.innerWidth)}return e.$$set=f=>{"startTone"in f&&n(6,i=f.startTone),"chrdType"in f&&n(0,a=f.chrdType),"shortcutKeys"in f&&n(1,s=f.shortcutKeys),"instrument"in f&&n(2,c=f.instrument)},e.$$.update=()=>{e.$$.dirty&8&&n(4,o=Math.floor(r/(Ae(oe)+Ae(We))))},n(3,r=0),[a,s,c,r,o,u,i,m]}class ce extends q{constructor(t){super(),B(this,t,On,Ln,O,{startTone:6,chrdType:0,shortcutKeys:1,instrument:2})}}function jn(e){let t;return{c(){t=D("h1"),t.textContent="audio activates...",$(t,"class","svelte-5fc3z"),P(t,"opacity",e[0]?1:0)},m(n,r){R(n,t,r)},p(n,[r]){r&1&&P(t,"opacity",n[0]?1:0)},i:S,o:S,d(n){n&&j(t)}}}function Nn(e,t,n){let{showAudioActivate:r}=t;return e.$$set=o=>{"showAudioActivate"in o&&n(0,r=o.showAudioActivate)},[r]}class xn extends q{constructor(t){super(),B(this,t,Nn,jn,O,{showAudioActivate:0})}}function Vn(e){let t,n,r,o,i,a,s,c,u,m;function f(d){e[2](d)}let l={};return e[0]!==void 0&&(l.showAudioActivate=e[0]),n=new xn({props:l}),ne.push(()=>Ve(n,"showAudioActivate",f)),i=new ce({props:{startTone:ae,shortcutKeys:["q","w","e","r","t","z","u","i","o","p","ü"],chrdType:te.major,instrument:e[1]}}),s=new ce({props:{startTone:ae+9,shortcutKeys:["a","s","d","f","g","h","j","k","l","ö","ä"],chrdType:te.minor,instrument:e[1]}}),u=new ce({props:{startTone:ae+2*9,shortcutKeys:["y","x","c","v","b","n","m",",",".","-","_"],chrdType:te.diminished,instrument:e[1]}}),{c(){t=D("main"),L(n.$$.fragment),o=V(),L(i.$$.fragment),a=V(),L(s.$$.fragment),c=V(),L(u.$$.fragment),$(t,"class","svelte-10qjjto")},m(d,h){R(d,t,h),M(n,t,null),A(t,o),M(i,t,null),A(t,a),M(s,t,null),A(t,c),M(u,t,null),m=!0},p(d,[h]){const p={};!r&&h&1&&(r=!0,p.showAudioActivate=d[0],Oe(()=>r=!1)),n.$set(p)},i(d){m||(w(n.$$.fragment,d),w(i.$$.fragment,d),w(s.$$.fragment,d),w(u.$$.fragment,d),m=!0)},o(d){T(n.$$.fragment,d),T(i.$$.fragment,d),T(s.$$.fragment,d),T(u.$$.fragment,d),m=!1},d(d){d&&j(t),E(n),E(i),E(s),E(u)}}}function Rn(e,t,n){let r=!1;function o(){n(0,r=!0),setTimeout(()=>{n(0,r=!1)},1e3)}let i=new Tn(o);function a(s){r=s,n(0,r)}return[r,i,a]}class Bn extends q{constructor(t){super(),B(this,t,Rn,Vn,O,{})}}function qn(e,t,n){let{isMouseDown:r}=t;return Le(()=>{window.addEventListener("mousedown",()=>{n(0,r=!0)}),window.addEventListener("mouseup",()=>{n(0,r=!1)}),window.addEventListener("touchstart",()=>{n(0,r=!0)}),window.addEventListener("touchend",()=>{n(0,r=!1)})}),e.$$set=o=>{"isMouseDown"in o&&n(0,r=o.isMouseDown)},[r]}class Fn extends q{constructor(t){super(),B(this,t,qn,null,O,{isMouseDown:0})}}function Un(e){let t,n,r,o;function i(s){e[1](s)}let a={};return e[0].mouse.isDown!==void 0&&(a.isMouseDown=e[0].mouse.isDown),n=new Fn({props:a}),ne.push(()=>Ve(n,"isMouseDown",i)),{c(){t=D("div"),L(n.$$.fragment)},m(s,c){R(s,t,c),M(n,t,null),o=!0},p(s,[c]){const u={};!r&&c&1&&(r=!0,u.isMouseDown=s[0].mouse.isDown,Oe(()=>r=!1)),n.$set(u)},i(s){o||(w(n.$$.fragment,s),o=!0)},o(s){T(n.$$.fragment,s),o=!1},d(s){s&&j(t),E(n)}}}function Kn(e,t,n){let r;ke(e,de,i=>n(0,r=i));function o(i){e.$$.not_equal(r.mouse.isDown,i)&&(r.mouse.isDown=i,de.set(r))}return[r,o]}class Cn extends q{constructor(t){super(),B(this,t,Kn,Un,O,{})}}function Gn(e){let t,n,r,o,i;return n=new Bn({}),o=new Cn({}),{c(){t=D("main"),L(n.$$.fragment),r=V(),L(o.$$.fragment),$(t,"class","svelte-zs3zob")},m(a,s){R(a,t,s),M(n,t,null),A(t,r),M(o,t,null),i=!0},p:S,i(a){i||(w(n.$$.fragment,a),w(o.$$.fragment,a),i=!0)},o(a){T(n.$$.fragment,a),T(o.$$.fragment,a),i=!1},d(a){a&&j(t),E(n),E(o)}}}class zn extends q{constructor(t){super(),B(this,t,null,Gn,O,{})}}getComputedStyle(document.body).getPropertyValue("background-color");new zn({target:document.body});
