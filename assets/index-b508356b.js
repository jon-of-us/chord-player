var rt=Object.defineProperty;var ot=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>(ot(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function S(){}function Pe(e){return e()}function Ae(){return Object.create(null)}function H(e){e.forEach(Pe)}function je(e){return typeof e=="function"}function P(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function it(e){return Object.keys(e).length===0}function st(e,...t){if(e==null){for(const r of t)r(void 0);return S}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ne(e,t,n){e.$$.on_destroy.push(st(t,n))}const ut=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function A(e,t){e.appendChild(t)}function q(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function at(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function B(){return W(" ")}function ct(){return W("")}function Z(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function E(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function lt(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function D(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let ne;function te(e){ne=e}function Ve(){if(!ne)throw new Error("Function called outside component initialization");return ne}function Be(e){Ve().$$.on_mount.push(e)}function ft(e){Ve().$$.on_destroy.push(e)}const J=[],N=[];let X=[];const be=[],dt=Promise.resolve();let we=!1;function ht(){we||(we=!0,dt.then(qe))}function ce(e){X.push(e)}function Q(e){be.push(e)}const me=new Set;let G=0;function qe(){if(G!==0)return;const e=ne;do{try{for(;G<J.length;){const t=J[G];G++,te(t),mt(t.$$)}}catch(t){throw J.length=0,G=0,t}for(te(null),J.length=0,G=0;N.length;)N.pop()();for(let t=0;t<X.length;t+=1){const n=X[t];me.has(n)||(me.add(n),n())}X.length=0}while(J.length);for(;be.length;)be.pop()();we=!1,me.clear(),te(e)}function mt(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ce)}}function pt(e){const t=[],n=[];X.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),X=t}const ue=new Set;let V;function Fe(){V={r:0,c:[],p:V}}function Ue(){V.r||H(V.c),V=V.p}function _(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function T(e,t,n,r){if(e&&e.o){if(ue.has(e))return;ue.add(e),V.c.push(()=>{ue.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Te(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ee(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function O(e){e&&e.c()}function R(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),ce(()=>{const i=e.$$.on_mount.map(Pe).filter(je);e.$$.on_destroy?e.$$.on_destroy.push(...i):H(i),e.$$.on_mount=[]}),o.forEach(ce)}function $(e,t){const n=e.$$;n.fragment!==null&&(pt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(e,t){e.$$.dirty[0]===-1&&(J.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(e,t,n,r,o,i,c,s=[-1]){const u=ne;te(e);const a=e.$$={fragment:null,ctx:[],props:i,update:S,not_equal:o,bound:Ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ae(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};c&&c(a.root);let h=!1;if(a.ctx=n?n(e,t.props||{},(l,f,...m)=>{const g=m.length?m[0]:f;return a.ctx&&o(a.ctx[l],a.ctx[l]=g)&&(!a.skip_bound&&a.bound[l]&&a.bound[l](g),h&&gt(e,l)),f}):[],a.update(),h=!0,H(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const l=lt(t.target);a.fragment&&a.fragment.l(l),l.forEach(j)}else a.fragment&&a.fragment.c();t.intro&&_(e.$$.fragment),R(e,t.target,t.anchor),qe()}te(u)}class U{constructor(){K(this,"$$");K(this,"$$set")}$destroy(){$(this,1),this.$destroy=S}$on(t,n){if(!je(n))return S;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!it(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vt);function bt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Ce={exports:{}},Ke={exports:{}};function wt(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function yt(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,o=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,i=new Uint8Array(o),c,s,u=0,a=0,h=0;h<r;h++)if(s=h&3,u|=wt(n.charCodeAt(h))<<18-6*s,s===3||r-h===1){for(c=0;c<3&&a<o;c++,a++)i[a]=u>>>(16>>>c&24)&255;u=0}return i}var _t={decode:yt},At=function(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;t&&(o.responseType=t),o.open("GET",e),o.onload=function(){o.status===200?n(o.response):r(Error(o.statusText))},o.onerror=function(){r(Error("Network Error"))},o.send()})};(function(e){var t=_t,n=At;function r(v){return function(d){return typeof d=="string"&&v.test(d)}}function o(v,d){return typeof v=="string"?v+d:typeof v=="function"?v(d):d}function i(v,d,b,w){var M=c(d)?s:u(d)?a:h(d)?l:f(d)?m:g(d)?p:y(d)?C:fe(d)?re:de(d)?oe:null,L=b||{};return M?M(v,d,L):w?Promise.resolve(w):Promise.reject("Source not valid ("+d+")")}i.fetch=n;function c(v){return v instanceof ArrayBuffer}function s(v,d,b){return new Promise(function(w,M){v.decodeAudioData(d,function(L){w(L)},function(){M("Can't decode audio data ("+d.slice(0,30)+"...)")})})}var u=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function a(v,d,b){var w=o(b.from,d);return i(v,i.fetch(w,"arraybuffer"),b)}function h(v){return v&&typeof v.then=="function"}function l(v,d,b){return d.then(function(w){return i(v,w,b)})}var f=Array.isArray;function m(v,d,b){return Promise.all(d.map(function(w){return i(v,w,b,w)}))}function g(v){return v&&typeof v=="object"}function p(v,d,b){var w={},M=Object.keys(d).map(function(L){if(b.only&&b.only.indexOf(L)===-1)return null;var Y=d[L];return i(v,Y,b,Y).then(function(nt){w[L]=nt})});return Promise.all(M).then(function(){return w})}var y=r(/\.json(\?.*)?$/i);function C(v,d,b){var w=o(b.from,d);return i(v,i.fetch(w,"text").then(JSON.parse),b)}var fe=r(/^data:audio/);function re(v,d,b){var w=d.indexOf(",");return i(v,t.decode(d.slice(w+1)).buffer,b)}var de=r(/\.js(\?.*)?$/i);function oe(v,d,b){var w=o(b.from,d);return i(v,i.fetch(w,"text").then(he),b)}function he(v){var d=v.indexOf("MIDI.Soundfont.");if(d<0)throw Error("Invalid MIDI.js Soundfont format");d=v.indexOf("=",d)+2;var b=v.lastIndexOf(",");return JSON.parse(v.slice(d,b)+"}")}e.exports&&(e.exports=i),typeof window<"u"&&(window.loadAudio=i)})(Ke);var Tt=Ke.exports,Ge={exports:{}},St=Lt;function Lt(e){var t=e.createGain(),n=t._voltage=Dt(e),r=z(n),o=z(n),i=z(n);return t._startAmount=z(o),t._endAmount=z(i),t._multiplier=z(r),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=r.gain,t.startValue=o.gain,t.endValue=i.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,Mt),t}var Mt={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,n=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var o=this.sustain;t.cancelScheduledValues(e),n.cancelScheduledValues(e),r.cancelScheduledValues(e),r.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),n.setValueAtTime(1,e),n.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),n.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(o,this._decayFrom,Se(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var n=e+this.release;if(this.release){var r=this._multiplier.gain,o=this._startAmount.gain,i=this._endAmount.gain;r.cancelScheduledValues(e),o.cancelScheduledValues(e),i.cancelScheduledValues(e);var c=Se(this.release);if(this.attack&&e<this._decayFrom){var s=Rt(0,1,this._startedAt,this._decayFrom,e);r.linearRampToValueAtTime(s,e),o.linearRampToValueAtTime(1-s,e),o.setTargetAtTime(0,e,c)}i.setTargetAtTime(1,e,c),r.setTargetAtTime(0,e,c)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},Et=new Float32Array([1,1]);function Dt(e){var t=e.createBufferSource(),n=e.createBuffer(1,2,e.sampleRate);return n.getChannelData(0).set(Et),t.buffer=n,t.loop=!0,t}function z(e){var t=e.context.createGain();return e.connect(t),t}function Se(e){return Math.log(e+1)/Math.log(100)}function Rt(e,t,n,r,o){var i=t-e,c=r-n,s=o-n,u=s/c,a=e+u*i;return a<=e&&(a=e),a>=t&&(a=t),a}var $t=St,xt={},kt={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Ot(e,t,n){var r=!1,o=0,i={},c=e.createGain();c.gain.value=1;var s=Object.assign({},kt,n),u={context:e,out:c,opts:s};return t instanceof AudioBuffer?u.buffer=t:u.buffers=t,u.start=function(l,f,m){if(u.buffer&&l!==null)return u.start(null,l,f);var g=l?u.buffers[l]:u.buffer;if(g){if(!r){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+l+" not found.");return}var p=m||xt;f=Math.max(e.currentTime,f||0),u.emit("start",f,l,p);var y=h(l,g,p);return y.id=a(l,y),y.env.start(f),y.source.start(f),u.emit("started",f,y.id,y),p.duration&&y.stop(f+p.duration),y},u.play=function(l,f,m){return u.start(l,f,m)},u.stop=function(l,f){var m;return f=f||Object.keys(i),f.map(function(g){return m=i[g],m?(m.stop(l),m.id):null})},u.connect=function(l){return r=!0,c.connect(l),u},u.emit=function(l,f,m,g){u.onevent&&u.onevent(l,f,m,g);var p=u["on"+l];p&&p(f,m,g)},u;function a(l,f){return f.id=o++,i[f.id]=f,f.source.onended=function(){var m=e.currentTime;f.source.disconnect(),f.env.disconnect(),f.disconnect(),u.emit("ended",m,f.id,f)},f.id}function h(l,f,m){var g=e.createGain();return g.gain.value=0,g.connect(c),g.env=jt(e,m,s),g.env.connect(g.gain),g.source=e.createBufferSource(),g.source.buffer=f,g.source.connect(g),g.source.loop=m.loop||s.loop,g.source.playbackRate.value=Nt(m.cents||s.cents),g.source.loopStart=m.loopStart||s.loopStart,g.source.loopEnd=m.loopEnd||s.loopEnd,g.stop=function(p){var y=p||e.currentTime;u.emit("stop",y,l);var C=g.env.stop(y);g.source.stop(C)},g}}function Le(e){return typeof e=="number"}var Pt=["attack","decay","sustain","release"];function jt(e,t,n){var r=$t(e),o=t.adsr||n.adsr;return Pt.forEach(function(i,c){o?r[i]=o[c]:r[i]=t[i]||n[i]}),r.value.value=Le(t.gain)?t.gain:Le(n.gain)?n.gain:1,r}function Nt(e){return e?Math.pow(2,e/1200):1}var Vt=Ot,Bt=function(e){return e.on=function(t,n){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var r="on"+t,o=e[r];return e[r]=o?qt(o,n):n,e},e};function qt(e,t){return function(n,r,o,i){e(n,r,o,i),t(n,r,o,i)}}var ze=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Ft(){return ze}var Ut=[0,2,4,5,7,9,11];function Ie(e,t,n){if(typeof e!="string")return null;var r=ze.exec(e);if(!r||!t&&r[4])return null;var o={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};return o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length,o.chroma=Ut[o.step]+o.alt,r[3]&&(o.oct=+r[3],o.midi=o.chroma+12*(o.oct+1),o.freq=Je(o.midi,n)),t&&(o.tonicOf=r[4]),o}function Je(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var We={parse:Ie,regex:Ft,midiToFreq:Je},Ct=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Ct.forEach(function(e){We[e]=function(t){var n=Ie(t);return n&&typeof n[e]<"u"?n[e]:null}});var Kt=We,Gt=Kt,zt=function(e){return e!==null&&e!==[]&&e>=0&&e<129},It=function(e){return zt(e)?+e:Gt.midi(e)},Jt=function(e){if(e.buffers){var t=e.opts.map,n=typeof t=="function"?t:It,r=function(i){return i?n(i)||i:null};e.buffers=Wt(e.buffers,r);var o=e.start;e.start=function(i,c,s){var u=r(i),a=u%1;return a&&(u=Math.floor(u),s=Object.assign(s||{},{cents:Math.floor(a*100)})),o(u,c,s)}}return e};function Wt(e,t){return Object.keys(e).reduce(function(n,r){return n[t(r)]=e[r],n},{})}var Xt=Array.isArray,Ht=function(e){return e&&typeof e=="object"},Yt={},Zt=function(e){return e.schedule=function(t,n){var r=e.context.currentTime,o=t<r?r:t;e.emit("schedule",o,n);var i,c,s,u;return n.map(function(a){if(a)Xt(a)?(i=a[0],c=a[1]):(i=a.time,c=a);else return null;return Ht(c)?(s=c.name||c.key||c.note||c.midi||null,u=c):(s=c,u=Yt),e.start(s,o+(i||0),u)})},e};function ie(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xe={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,o,i){function c(a,h){if(!o[a]){if(!r[a]){var l=typeof ie=="function"&&ie;if(!h&&l)return l(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var m=o[a]={exports:{}};r[a][0].call(m.exports,function(g){var p=r[a][1][g];return c(p||g)},m,m.exports,n,r,o,i)}return o[a].exports}for(var s=typeof ie=="function"&&ie,u=0;u<i.length;u++)c(i[u]);return c}({1:[function(n,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){function c(s){if(this._event=s,this._data=s.data,this.receivedTime=s.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=s.data[0]&240,this.channel=s.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 144:this.messageType="noteon",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 160:this.messageType="keypressure",this.key=s.data[1]&127,this.pressure=s.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=s.data[1]&127,this.controllerValue=s.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=s.data[1];break;case 208:this.messageType="channelpressure",this.pressure=s.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=s.data[2]&127,a=s.data[1]&127;this.pitchBend=(u<<8)+a;break}}return new c(i)},r.exports=o.default},{}]},{},[1])(1)})})(Xe);var Qt=Xe.exports,en=Qt,tn=function(e){return e.listenToMidi=function(t,n){var r={},o=n||{},i=o.gain||function(c){return c/127};return t.onmidimessage=function(c){var s=c.messageType?c:en(c);if(s.messageType==="noteon"&&s.velocity===0&&(s.messageType="noteoff"),!(o.channel&&s.channel!==o.channel))switch(s.messageType){case"noteon":r[s.key]=e.play(s.key,0,{gain:i(s.velocity)});break;case"noteoff":r[s.key]&&(r[s.key].stop(),delete r[s.key]);break}},e},e};(function(e){var t=Vt,n=Bt,r=Jt,o=Zt,i=tn;function c(s,u,a){return i(o(r(n(t(s,u,a)))))}e.exports&&(e.exports=c),typeof window<"u"&&(window.SamplePlayer=c)})(Ge);var nn=Ge.exports;function Me(e,t){return Array(t+1).join(e)}function _e(e){return typeof e=="number"}function rn(e){return typeof e=="string"}function on(e){return typeof e<"u"}function He(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ye=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function sn(){return Ye}var un=[0,2,4,5,7,9,11];function k(e,t,n){if(typeof e!="string")return null;var r=Ye.exec(e);if(!r||!t&&r[4])return null;var o={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length;var i=un[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,r[3]&&(o.oct=+r[3],o.midi=i+12*(o.oct+1),o.freq=He(o.midi,n)),t&&(o.tonicOf=r[4]),o}var an="CDEFGAB";function cn(e){return _e(e)?e<0?Me("b",-e):Me("#",e):""}function ln(e){return _e(e)?""+e:""}function Ze(e,t,n){return e===null||typeof e>"u"?null:e.step?Ze(e.step,e.alt,e.oct):e<0||e>6?null:an.charAt(e)+cn(t)+ln(n)}function Qe(e){if((_e(e)||rn(e))&&e>=0&&e<128)return+e;var t=k(e);return t&&on(t.midi)?t.midi:null}function fn(e,t){var n=Qe(e);return n===null?null:He(n,t)}function dn(e){return(k(e)||{}).letter}function hn(e){return(k(e)||{}).acc}function mn(e){return(k(e)||{}).pc}function pn(e){return(k(e)||{}).step}function gn(e){return(k(e)||{}).alt}function vn(e){return(k(e)||{}).chroma}function bn(e){return(k(e)||{}).oct}const wn=Object.freeze(Object.defineProperty({__proto__:null,acc:hn,alt:gn,build:Ze,chroma:vn,freq:fn,letter:dn,midi:Qe,oct:bn,parse:k,pc:mn,regex:sn,step:pn},Symbol.toStringTag,{value:"Module"})),yn=bt(wn);var pe,Ee;function _n(){if(Ee)return pe;Ee=1;var e=yn;function t(o,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(o);this.nameToUrl=i||t.nameToUrl,this.ctx=o,this.instruments={},this.promises=[]}t.prototype.onready=function(o){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(o)},t.prototype.instrument=function(o,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(o=o||"default",o in this.instruments)return this.instruments[o];var s={name:o,play:r(c,i)};if(this.instruments[o]=s,o!=="default"){var u=t.instrument(c,o,i).then(function(a){return s.play=a.play,s});this.promises.push(u),s.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(a)}}else s.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a()};return s};function n(o,i,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(o,i,c).then(function(s){return s.buffers})}t.loadBuffers=n;function r(o,i){return i=i||{},function(c,s,u,a){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var h=c>0&&c<129?+c:e.midi(c),l=h?e.midiToFreq(h,440):null;if(l){u=u||.2,a=a||{};var f=a.destination||i.destination||o.destination,m=a.vcoType||i.vcoType||"sine",g=a.gain||i.gain||.4,p=o.createOscillator();p.type=m,p.frequency.value=l;var y=o.createGain();return y.gain.value=g,p.connect(y),y.connect(f),p.start(s),u>0&&p.stop(s+u),p}}}return t.noteToMidi=e.midi,pe=t,pe}(function(e){var t=Tt,n=nn;function r(s,u,a){if(arguments.length===1)return function(g,p){return r(s,g,p)};var h=a||{},l=h.isSoundfontURL||o,f=h.nameToUrl||i,m=l(u)?u:f(u,h.soundfont,h.format);return t(s,m,{only:h.only||h.notes}).then(function(g){var p=n(s,g,h).connect(h.destination?h.destination:s.destination);return p.url=m,p.name=u,p})}function o(s){return/\.js(\?.*)?$/i.test(s)}function i(s,u,a){return a=a==="ogg"?a:"mp3",u=u==="FluidR3_GM"?u:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+u+"/"+s+"-"+a+".js"}var c=_n();c.instrument=r,c.nameToUrl=i,e.exports&&(e.exports=c),typeof window<"u"&&(window.Soundfont=c)})(Ce);var An=Ce.exports;class Tn{constructor(t,n){K(this,"sound",null);this.instrument=t,this.note=n}async start(){this.stop(),this.sound=await this.instrument.play(this.note)}stop(){this.sound!=null&&(this.sound.stop(),this.sound=null)}}const De=12*4,ge=49,Sn=1.7;function Re(e){return parseInt(e.replace("px",""))}const le="80px",et="4px";class Ln{constructor(t=()=>{}){K(this,"instrument",null);this.initalizeCallback=t}async play(t){if(this.instrument==null){this.initalizeCallback();let n=new(window.AudioContext||window.webkitAudioContext);this.instrument=await An.instrument(n,"acoustic_grand_piano");let r=n.createGain();return r.connect(n.destination),this.instrument.connect(r),r.gain.value=Sn,null}else return this.instrument.play(t.toString())}}var ae=(e=>(e.major="maj",e.minor="min",e.diminished="dim",e.root="root",e))(ae||{});function Mn(e,t){let n=[];switch(t){case"maj":n=[e,e+4,e+7];break;case"min":n=[e,e+3,e+7];break;case"dim":n=[e,e+3,e+6];break;case"root":n=[e]}n=n.map(o=>o%12+De);let r=[e%12+De-12];return n.concat(r)}class $e{constructor(t,n,r){K(this,"tones",[]);this.tones=Mn(n,r).map(o=>new Tn(t,o))}start(){this.tones.forEach(t=>t.start())}stop(){this.tones.forEach(t=>t.stop())}}const I=[];function En(e,t=S){let n;const r=new Set;function o(s){if(P(e,s)&&(e=s,n)){const u=!I.length;for(const a of r)a[1](),I.push(a,e);if(u){for(let a=0;a<I.length;a+=2)I[a][0](I[a+1]);I.length=0}}}function i(s){o(s(e))}function c(s,u=S){const a=[s,u];return r.add(a),r.size===1&&(n=t(o,i)||S),s(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:c}}const ye=En({mouse:{isDown:!1}});function Dn(e){let t,n,r,o,i,c,s,u,a,h;return{c(){t=x("button"),n=W(e[0]),r=B(),o=x("p"),i=W(e[1]),c=B(),s=x("p"),u=W(e[2]),E(o,"class","descriptionlabel svelte-12fjv3s"),E(o,"id","topDescriptionLabel"),E(s,"class","descriptionlabel svelte-12fjv3s"),E(s,"id","bottomDescriptionLabel"),E(t,"class","svelte-12fjv3s"),D(t,"background-color",e[3]?"#606060":"#303030"),D(t,"width",le),D(t,"height",le),D(t,"margin",et)},m(l,f){q(l,t,f),A(t,n),A(t,r),A(t,o),A(o,i),A(t,c),A(t,s),A(s,u),a||(h=[Z(t,"mousedown",e[4]),Z(t,"mouseenter",e[6]),Z(t,"pointerleave",e[5]),Z(t,"pointerup",e[5])],a=!0)},p(l,[f]){f&1&&se(n,l[0]),f&2&&se(i,l[1]),f&4&&se(u,l[2]),f&8&&D(t,"background-color",l[3]?"#606060":"#303030")},i:S,o:S,d(l){l&&j(t),a=!1,H(h)}}}function Rn(e,t,n){let r;Ne(e,ye,p=>n(9,r=p));let{sound:o}=t,{shortcutKey:i}=t,{label:c}=t,{topDescriptionLabel:s=""}=t,{bottomDescriptionLabel:u=""}=t,a=!1;function h(){n(3,a=!0),o.start()}function l(){n(3,a=!1),o.stop()}function f(){r.mouse.isDown&&(n(3,a=!0),setTimeout(()=>{a&&h()},200))}function m(p){p.key===i&&!a&&h()}function g(p){p.key===i&&l()}return Be(()=>(window.addEventListener("keydown",m),window.addEventListener("keyup",g),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",g),l()})),ft(()=>{l()}),e.$$set=p=>{"sound"in p&&n(7,o=p.sound),"shortcutKey"in p&&n(8,i=p.shortcutKey),"label"in p&&n(0,c=p.label),"topDescriptionLabel"in p&&n(1,s=p.topDescriptionLabel),"bottomDescriptionLabel"in p&&n(2,u=p.bottomDescriptionLabel)},[c,s,u,a,h,l,f,o,i]}class $n extends U{constructor(t){super(),F(this,t,Rn,Dn,P,{sound:7,shortcutKey:8,label:0,topDescriptionLabel:1,bottomDescriptionLabel:2})}}function xn(e){return(7*(e+3)%12).toString()}function kn(e){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}getComputedStyle(document.body).getPropertyValue("background-color");let On="rgb(220, 220, 220)";function xe(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function ke(e){let t,n;return t=new $n({props:{label:xn(e[4](e[8])),topDescriptionLabel:kn(e[4](e[8])),bottomDescriptionLabel:`press ${e[6]}`,sound:new $e(e[2],e[4](e[8]),e[0]),shortcutKey:e[6]}}),{c(){O(t.$$.fragment)},m(r,o){R(t,r,o),n=!0},p(r,o){const i={};o&2&&(i.bottomDescriptionLabel=`press ${r[6]}`),o&5&&(i.sound=new $e(r[2],r[4](r[8]),r[0])),o&2&&(i.shortcutKey=r[6]),t.$set(i)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function Oe(e){let t,n,r=e[8]<e[3]+1&&ke(e);return{c(){r&&r.c(),t=ct()},m(o,i){r&&r.m(o,i),q(o,t,i),n=!0},p(o,i){o[8]<o[3]+1?r?(r.p(o,i),i&8&&_(r,1)):(r=ke(o),r.c(),_(r,1),r.m(t.parentNode,t)):r&&(Fe(),T(r,1,1,()=>{r=null}),Ue())},i(o){n||(_(r),n=!0)},o(o){T(r),n=!1},d(o){o&&j(t),r&&r.d(o)}}}function Pn(e){let t,n,r=e[0].toString()+"",o,i,c,s=Te(e[1]),u=[];for(let h=0;h<s.length;h+=1)u[h]=Oe(xe(e,s,h));const a=h=>T(u[h],1,1,()=>{u[h]=null});return{c(){t=x("div"),n=x("h1"),o=W(r),i=B();for(let h=0;h<u.length;h+=1)u[h].c();D(n,"width",le),D(n,"color",On),E(t,"class","button-row svelte-14vrr43")},m(h,l){q(h,t,l),A(t,n),A(n,o),A(t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);c=!0},p(h,[l]){if((!c||l&1)&&r!==(r=h[0].toString()+"")&&se(o,r),l&31){s=Te(h[1]);let f;for(f=0;f<s.length;f+=1){const m=xe(h,s,f);u[f]?(u[f].p(m,l),_(u[f],1)):(u[f]=Oe(m),u[f].c(),_(u[f],1),u[f].m(t,null))}for(Fe(),f=s.length;f<u.length;f+=1)a(f);Ue()}},i(h){if(!c){for(let l=0;l<s.length;l+=1)_(u[l]);c=!0}},o(h){u=u.filter(Boolean);for(let l=0;l<u.length;l+=1)T(u[l]);c=!1},d(h){h&&j(t),at(u,h)}}}function jn(e,t,n){let{startTone:r}=t,{chrdType:o}=t,{shortcutKeys:i}=t,{instrument:c}=t,{maxRowLength:s=1/0}=t;function u(a){return r+7*a}return e.$$set=a=>{"startTone"in a&&n(5,r=a.startTone),"chrdType"in a&&n(0,o=a.chrdType),"shortcutKeys"in a&&n(1,i=a.shortcutKeys),"instrument"in a&&n(2,c=a.instrument),"maxRowLength"in a&&n(3,s=a.maxRowLength)},[o,i,c,s,u,r]}class ve extends U{constructor(t){super(),F(this,t,jn,Pn,P,{startTone:5,chrdType:0,shortcutKeys:1,instrument:2,maxRowLength:3})}}function Nn(e){let t;return{c(){t=x("h1"),t.textContent="audio activates... (internet required)",E(t,"class","svelte-5fc3z"),D(t,"opacity",e[0]?1:0)},m(n,r){q(n,t,r)},p(n,[r]){r&1&&D(t,"opacity",n[0]?1:0)},i:S,o:S,d(n){n&&j(t)}}}function Vn(e,t,n){let{showAudioActivate:r}=t;return e.$$set=o=>{"showAudioActivate"in o&&n(0,r=o.showAudioActivate)},[r]}class Bn extends U{constructor(t){super(),F(this,t,Vn,Nn,P,{showAudioActivate:0})}}const{window:tt}=ut;function qn(e){let t,n,r,o,i,c,s,u,a,h,l,f,m,g,p;ce(e[4]);function y(d){e[5](d)}let C={};e[1]!==void 0&&(C.showAudioActivate=e[1]),n=new Bn({props:C}),N.push(()=>ee(n,"showAudioActivate",y));function fe(d){e[6](d)}let re={startTone:ge,shortcutKeys:["q","w","e","r","t","z","u","i","o","p","ü"],chrdType:ae.root,instrument:e[3]};e[2]!==void 0&&(re.maxRowLength=e[2]),i=new ve({props:re}),N.push(()=>ee(i,"maxRowLength",fe));function de(d){e[7](d)}let oe={startTone:ge+9,shortcutKeys:["a","s","d","f","g","h","j","k","l","ö","ä"],chrdType:ae.root,instrument:e[3]};e[2]!==void 0&&(oe.maxRowLength=e[2]),u=new ve({props:oe}),N.push(()=>ee(u,"maxRowLength",de));function he(d){e[8](d)}let v={startTone:ge+2*9,shortcutKeys:["y","x","c","v","b","n","m",",",".","-","_"],chrdType:ae.root,instrument:e[3]};return e[2]!==void 0&&(v.maxRowLength=e[2]),l=new ve({props:v}),N.push(()=>ee(l,"maxRowLength",he)),{c(){t=x("main"),O(n.$$.fragment),o=B(),O(i.$$.fragment),s=B(),O(u.$$.fragment),h=B(),O(l.$$.fragment),E(t,"class","svelte-10qjjto")},m(d,b){q(d,t,b),R(n,t,null),A(t,o),R(i,t,null),A(t,s),R(u,t,null),A(t,h),R(l,t,null),m=!0,g||(p=Z(tt,"resize",e[4]),g=!0)},p(d,[b]){const w={};!r&&b&2&&(r=!0,w.showAudioActivate=d[1],Q(()=>r=!1)),n.$set(w);const M={};!c&&b&4&&(c=!0,M.maxRowLength=d[2],Q(()=>c=!1)),i.$set(M);const L={};!a&&b&4&&(a=!0,L.maxRowLength=d[2],Q(()=>a=!1)),u.$set(L);const Y={};!f&&b&4&&(f=!0,Y.maxRowLength=d[2],Q(()=>f=!1)),l.$set(Y)},i(d){m||(_(n.$$.fragment,d),_(i.$$.fragment,d),_(u.$$.fragment,d),_(l.$$.fragment,d),m=!0)},o(d){T(n.$$.fragment,d),T(i.$$.fragment,d),T(u.$$.fragment,d),T(l.$$.fragment,d),m=!1},d(d){d&&j(t),$(n),$(i),$(u),$(l),g=!1,p()}}}function Fn(e,t,n){let r,o=!1;function i(){n(1,o=!0),setTimeout(()=>{n(1,o=!1)},1e3)}let c=new Ln(i),s=window.innerWidth;function u(){n(0,s=tt.innerWidth)}function a(m){o=m,n(1,o)}function h(m){r=m,n(2,r),n(0,s)}function l(m){r=m,n(2,r),n(0,s)}function f(m){r=m,n(2,r),n(0,s)}return e.$$.update=()=>{e.$$.dirty&1&&n(2,r=Math.floor((s-100)/(Re(le)+Re(et)*2))-1)},[s,o,r,c,u,a,h,l,f]}class Un extends U{constructor(t){super(),F(this,t,Fn,qn,P,{})}}function Cn(e,t,n){let{isMouseDown:r}=t;return Be(()=>{window.addEventListener("mousedown",()=>{n(0,r=!0)}),window.addEventListener("mouseup",()=>{n(0,r=!1)}),window.addEventListener("touchstart",()=>{n(0,r=!0)}),window.addEventListener("touchend",()=>{n(0,r=!1)})}),e.$$set=o=>{"isMouseDown"in o&&n(0,r=o.isMouseDown)},[r]}class Kn extends U{constructor(t){super(),F(this,t,Cn,null,P,{isMouseDown:0})}}function Gn(e){let t,n,r,o;function i(s){e[1](s)}let c={};return e[0].mouse.isDown!==void 0&&(c.isMouseDown=e[0].mouse.isDown),n=new Kn({props:c}),N.push(()=>ee(n,"isMouseDown",i)),{c(){t=x("div"),O(n.$$.fragment)},m(s,u){q(s,t,u),R(n,t,null),o=!0},p(s,[u]){const a={};!r&&u&1&&(r=!0,a.isMouseDown=s[0].mouse.isDown,Q(()=>r=!1)),n.$set(a)},i(s){o||(_(n.$$.fragment,s),o=!0)},o(s){T(n.$$.fragment,s),o=!1},d(s){s&&j(t),$(n)}}}function zn(e,t,n){let r;Ne(e,ye,i=>n(0,r=i));function o(i){e.$$.not_equal(r.mouse.isDown,i)&&(r.mouse.isDown=i,ye.set(r))}return[r,o]}class In extends U{constructor(t){super(),F(this,t,zn,Gn,P,{})}}function Jn(e){let t,n,r,o,i;return n=new Un({}),o=new In({}),{c(){t=x("main"),O(n.$$.fragment),r=B(),O(o.$$.fragment),E(t,"class","svelte-zs3zob")},m(c,s){q(c,t,s),R(n,t,null),A(t,r),R(o,t,null),i=!0},p:S,i(c){i||(_(n.$$.fragment,c),_(o.$$.fragment,c),i=!0)},o(c){T(n.$$.fragment,c),T(o.$$.fragment,c),i=!1},d(c){c&&j(t),$(n),$(o)}}}class Wn extends U{constructor(t){super(),F(this,t,null,Jn,P,{})}}new Wn({target:document.body});
