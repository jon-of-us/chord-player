var ze=Object.defineProperty;var Ie=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var L=(e,t,n)=>(Ie(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function k(){}function Te(e){return e()}function he(){return Object.create(null)}function U(e){e.forEach(Te)}function Se(e){return typeof e=="function"}function I(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Je(e){return Object.keys(e).length===0}function w(e,t){e.appendChild(t)}function J(e,t,n){e.insertBefore(t,n||null)}function K(e){e.parentNode&&e.parentNode.removeChild(e)}function Xe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function q(){return C(" ")}function te(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let z;function G(e){z=e}function $e(){if(!z)throw new Error("Function called outside component initialization");return z}function Ye(e){$e().$$.on_mount.push(e)}function Ze(e){$e().$$.on_destroy.push(e)}const B=[],ue=[];let F=[];const se=[],Qe=Promise.resolve();let ae=!1;function We(){ae||(ae=!0,Qe.then(Ee))}function ce(e){F.push(e)}function et(e){se.push(e)}const ne=new Set;let D=0;function Ee(){if(D!==0)return;const e=z;do{try{for(;D<B.length;){const t=B[D];D++,G(t),tt(t.$$)}}catch(t){throw B.length=0,D=0,t}for(G(null),B.length=0,D=0;ue.length;)ue.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];ne.has(n)||(ne.add(n),n())}F.length=0}while(B.length);for(;se.length;)se.pop()();ae=!1,ne.clear(),G(e)}function tt(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ce)}}function nt(e){const t=[],n=[];F.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),F=t}const Q=new Set;let O;function rt(){O={r:0,c:[],p:O}}function ot(){O.r||U(O.c),O=O.p}function A(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function E(e,t,n,o){if(e&&e.o){if(Q.has(e))return;Q.add(e),O.c.push(()=>{Q.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function it(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function R(e){e&&e.c()}function P(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),ce(()=>{const i=e.$$.on_mount.map(Te).filter(Se);e.$$.on_destroy?e.$$.on_destroy.push(...i):U(i),e.$$.on_mount=[]}),r.forEach(ce)}function j(e,t){const n=e.$$;n.fragment!==null&&(nt(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(e,t){e.$$.dirty[0]===-1&&(B.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(e,t,n,o,r,i,c,s=[-1]){const u=z;G(e);const a=e.$$={fragment:null,ctx:[],props:i,update:k,not_equal:r,bound:he(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:he(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};c&&c(a.root);let h=!1;if(a.ctx=n?n(e,t.props||{},(d,l,...f)=>{const m=f.length?f[0]:l;return a.ctx&&r(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),h&&ut(e,d)),l}):[],a.update(),h=!0,U(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const d=He(t.target);a.fragment&&a.fragment.l(d),d.forEach(K)}else a.fragment&&a.fragment.c();t.intro&&A(e.$$.fragment),P(e,t.target,t.anchor),Ee()}G(u)}class H{constructor(){L(this,"$$");L(this,"$$set")}$destroy(){j(this,1),this.$destroy=k}$on(t,n){if(!Se(n))return k;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const st="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(st);function at(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})}),n}var Me={exports:{}},ke={exports:{}};function ct(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function lt(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=n.length,r=t?Math.ceil((o*3+1>>2)/t)*t:o*3+1>>2,i=new Uint8Array(r),c,s,u=0,a=0,h=0;h<o;h++)if(s=h&3,u|=ct(n.charCodeAt(h))<<18-6*s,s===3||o-h===1){for(c=0;c<3&&a<r;c++,a++)i[a]=u>>>(16>>>c&24)&255;u=0}return i}var ft={decode:lt},dt=function(e,t){return new Promise(function(n,o){var r=new XMLHttpRequest;t&&(r.responseType=t),r.open("GET",e),r.onload=function(){r.status===200?n(r.response):o(Error(r.statusText))},r.onerror=function(){o(Error("Network Error"))},r.send()})};(function(e){var t=ft,n=dt;function o(v){return function(p){return typeof p=="string"&&v.test(p)}}function r(v,p){return typeof v=="string"?v+p:typeof v=="function"?v(p):p}function i(v,p,y,b){var N=c(p)?s:u(p)?a:h(p)?d:l(p)?f:m(p)?g:_(p)?ee:qe(p)?Fe:Ue(p)?Ke:null,x=y||{};return N?N(v,p,x):b?Promise.resolve(b):Promise.reject("Source not valid ("+p+")")}i.fetch=n;function c(v){return v instanceof ArrayBuffer}function s(v,p,y){return new Promise(function(b,N){v.decodeAudioData(p,function(x){b(x)},function(){N("Can't decode audio data ("+p.slice(0,30)+"...)")})})}var u=o(/\.(mp3|wav|ogg)(\?.*)?$/i);function a(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"arraybuffer"),y)}function h(v){return v&&typeof v.then=="function"}function d(v,p,y){return p.then(function(b){return i(v,b,y)})}var l=Array.isArray;function f(v,p,y){return Promise.all(p.map(function(b){return i(v,b,y,b)}))}function m(v){return v&&typeof v=="object"}function g(v,p,y){var b={},N=Object.keys(p).map(function(x){if(y.only&&y.only.indexOf(x)===-1)return null;var de=p[x];return i(v,de,y,de).then(function(Ge){b[x]=Ge})});return Promise.all(N).then(function(){return b})}var _=o(/\.json(\?.*)?$/i);function ee(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"text").then(JSON.parse),y)}var qe=o(/^data:audio/);function Fe(v,p,y){var b=p.indexOf(",");return i(v,t.decode(p.slice(b+1)).buffer,y)}var Ue=o(/\.js(\?.*)?$/i);function Ke(v,p,y){var b=r(y.from,p);return i(v,i.fetch(b,"text").then(Ce),y)}function Ce(v){var p=v.indexOf("MIDI.Soundfont.");if(p<0)throw Error("Invalid MIDI.js Soundfont format");p=v.indexOf("=",p)+2;var y=v.lastIndexOf(",");return JSON.parse(v.slice(p,y)+"}")}e.exports&&(e.exports=i),typeof window<"u"&&(window.loadAudio=i)})(ke);var ht=ke.exports,xe={exports:{}},mt=pt;function pt(e){var t=e.createGain(),n=t._voltage=yt(e),o=V(n),r=V(n),i=V(n);return t._startAmount=V(r),t._endAmount=V(i),t._multiplier=V(o),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=o.gain,t.startValue=r.gain,t.endValue=i.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,vt),t}var vt={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,n=this._startAmount.gain,o=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var r=this.sustain;t.cancelScheduledValues(e),n.cancelScheduledValues(e),o.cancelScheduledValues(e),o.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),n.setValueAtTime(1,e),n.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),n.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(r,this._decayFrom,pe(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var n=e+this.release;if(this.release){var o=this._multiplier.gain,r=this._startAmount.gain,i=this._endAmount.gain;o.cancelScheduledValues(e),r.cancelScheduledValues(e),i.cancelScheduledValues(e);var c=pe(this.release);if(this.attack&&e<this._decayFrom){var s=bt(0,1,this._startedAt,this._decayFrom,e);o.linearRampToValueAtTime(s,e),r.linearRampToValueAtTime(1-s,e),r.setTargetAtTime(0,e,c)}i.setTargetAtTime(1,e,c),o.setTargetAtTime(0,e,c)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},gt=new Float32Array([1,1]);function yt(e){var t=e.createBufferSource(),n=e.createBuffer(1,2,e.sampleRate);return n.getChannelData(0).set(gt),t.buffer=n,t.loop=!0,t}function V(e){var t=e.context.createGain();return e.connect(t),t}function pe(e){return Math.log(e+1)/Math.log(100)}function bt(e,t,n,o,r){var i=t-e,c=o-n,s=r-n,u=s/c,a=e+u*i;return a<=e&&(a=e),a>=t&&(a=t),a}var _t=mt,wt={},At={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Tt(e,t,n){var o=!1,r=0,i={},c=e.createGain();c.gain.value=1;var s=Object.assign({},At,n),u={context:e,out:c,opts:s};return t instanceof AudioBuffer?u.buffer=t:u.buffers=t,u.start=function(d,l,f){if(u.buffer&&d!==null)return u.start(null,d,l);var m=d?u.buffers[d]:u.buffer;if(m){if(!o){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+d+" not found.");return}var g=f||wt;l=Math.max(e.currentTime,l||0),u.emit("start",l,d,g);var _=h(d,m,g);return _.id=a(d,_),_.env.start(l),_.source.start(l),u.emit("started",l,_.id,_),g.duration&&_.stop(l+g.duration),_},u.play=function(d,l,f){return u.start(d,l,f)},u.stop=function(d,l){var f;return l=l||Object.keys(i),l.map(function(m){return f=i[m],f?(f.stop(d),f.id):null})},u.connect=function(d){return o=!0,c.connect(d),u},u.emit=function(d,l,f,m){u.onevent&&u.onevent(d,l,f,m);var g=u["on"+d];g&&g(l,f,m)},u;function a(d,l){return l.id=r++,i[l.id]=l,l.source.onended=function(){var f=e.currentTime;l.source.disconnect(),l.env.disconnect(),l.disconnect(),u.emit("ended",f,l.id,l)},l.id}function h(d,l,f){var m=e.createGain();return m.gain.value=0,m.connect(c),m.env=$t(e,f,s),m.env.connect(m.gain),m.source=e.createBufferSource(),m.source.buffer=l,m.source.connect(m),m.source.loop=f.loop||s.loop,m.source.playbackRate.value=Et(f.cents||s.cents),m.source.loopStart=f.loopStart||s.loopStart,m.source.loopEnd=f.loopEnd||s.loopEnd,m.stop=function(g){var _=g||e.currentTime;u.emit("stop",_,d);var ee=m.env.stop(_);m.source.stop(ee)},m}}function ve(e){return typeof e=="number"}var St=["attack","decay","sustain","release"];function $t(e,t,n){var o=_t(e),r=t.adsr||n.adsr;return St.forEach(function(i,c){r?o[i]=r[c]:o[i]=t[i]||n[i]}),o.value.value=ve(t.gain)?t.gain:ve(n.gain)?n.gain:1,o}function Et(e){return e?Math.pow(2,e/1200):1}var Mt=Tt,kt=function(e){return e.on=function(t,n){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var o="on"+t,r=e[o];return e[o]=r?xt(r,n):n,e},e};function xt(e,t){return function(n,o,r,i){e(n,o,r,i),t(n,o,r,i)}}var Oe=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Ot(){return Oe}var Pt=[0,2,4,5,7,9,11];function Pe(e,t,n){if(typeof e!="string")return null;var o=Oe.exec(e);if(!o||!t&&o[4])return null;var r={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length,r.chroma=Pt[r.step]+r.alt,o[3]&&(r.oct=+o[3],r.midi=r.chroma+12*(r.oct+1),r.freq=je(r.midi,n)),t&&(r.tonicOf=o[4]),r}function je(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ne={parse:Pe,regex:Ot,midiToFreq:je},jt=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];jt.forEach(function(e){Ne[e]=function(t){var n=Pe(t);return n&&typeof n[e]<"u"?n[e]:null}});var Nt=Ne,Lt=Nt,Dt=function(e){return e!==null&&e!==[]&&e>=0&&e<129},Vt=function(e){return Dt(e)?+e:Lt.midi(e)},Bt=function(e){if(e.buffers){var t=e.opts.map,n=typeof t=="function"?t:Vt,o=function(i){return i?n(i)||i:null};e.buffers=Rt(e.buffers,o);var r=e.start;e.start=function(i,c,s){var u=o(i),a=u%1;return a&&(u=Math.floor(u),s=Object.assign(s||{},{cents:Math.floor(a*100)})),r(u,c,s)}}return e};function Rt(e,t){return Object.keys(e).reduce(function(n,o){return n[t(o)]=e[o],n},{})}var qt=Array.isArray,Ft=function(e){return e&&typeof e=="object"},Ut={},Kt=function(e){return e.schedule=function(t,n){var o=e.context.currentTime,r=t<o?o:t;e.emit("schedule",r,n);var i,c,s,u;return n.map(function(a){if(a)qt(a)?(i=a[0],c=a[1]):(i=a.time,c=a);else return null;return Ft(c)?(s=c.name||c.key||c.note||c.midi||null,u=c):(s=c,u=Ut),e.start(s,r+(i||0),u)})},e};function Y(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Le={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(o,r,i){function c(a,h){if(!r[a]){if(!o[a]){var d=typeof Y=="function"&&Y;if(!h&&d)return d(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};o[a][0].call(f.exports,function(m){var g=o[a][1][m];return c(g||m)},f,f.exports,n,o,r,i)}return r[a].exports}for(var s=typeof Y=="function"&&Y,u=0;u<i.length;u++)c(i[u]);return c}({1:[function(n,o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(i){function c(s){if(this._event=s,this._data=s.data,this.receivedTime=s.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=s.data[0]&240,this.channel=s.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 144:this.messageType="noteon",this.key=s.data[1]&127,this.velocity=s.data[2]&127;break;case 160:this.messageType="keypressure",this.key=s.data[1]&127,this.pressure=s.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=s.data[1]&127,this.controllerValue=s.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=s.data[1];break;case 208:this.messageType="channelpressure",this.pressure=s.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=s.data[2]&127,a=s.data[1]&127;this.pitchBend=(u<<8)+a;break}}return new c(i)},o.exports=r.default},{}]},{},[1])(1)})})(Le);var Ct=Le.exports,Gt=Ct,zt=function(e){return e.listenToMidi=function(t,n){var o={},r=n||{},i=r.gain||function(c){return c/127};return t.onmidimessage=function(c){var s=c.messageType?c:Gt(c);if(s.messageType==="noteon"&&s.velocity===0&&(s.messageType="noteoff"),!(r.channel&&s.channel!==r.channel))switch(s.messageType){case"noteon":o[s.key]=e.play(s.key,0,{gain:i(s.velocity)});break;case"noteoff":o[s.key]&&(o[s.key].stop(),delete o[s.key]);break}},e},e};(function(e){var t=Mt,n=kt,o=Bt,r=Kt,i=zt;function c(s,u,a){return i(r(o(n(t(s,u,a)))))}e.exports&&(e.exports=c),typeof window<"u"&&(window.SamplePlayer=c)})(xe);var It=xe.exports;function ge(e,t){return Array(t+1).join(e)}function fe(e){return typeof e=="number"}function Jt(e){return typeof e=="string"}function Xt(e){return typeof e<"u"}function De(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Ve=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Ht(){return Ve}var Yt=[0,2,4,5,7,9,11];function S(e,t,n){if(typeof e!="string")return null;var o=Ve.exec(e);if(!o||!t&&o[4])return null;var r={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length;var i=Yt[r.step]+r.alt;return r.chroma=i<0?12+i:i%12,o[3]&&(r.oct=+o[3],r.midi=i+12*(r.oct+1),r.freq=De(r.midi,n)),t&&(r.tonicOf=o[4]),r}var Zt="CDEFGAB";function Qt(e){return fe(e)?e<0?ge("b",-e):ge("#",e):""}function Wt(e){return fe(e)?""+e:""}function Be(e,t,n){return e===null||typeof e>"u"?null:e.step?Be(e.step,e.alt,e.oct):e<0||e>6?null:Zt.charAt(e)+Qt(t)+Wt(n)}function Re(e){if((fe(e)||Jt(e))&&e>=0&&e<128)return+e;var t=S(e);return t&&Xt(t.midi)?t.midi:null}function en(e,t){var n=Re(e);return n===null?null:De(n,t)}function tn(e){return(S(e)||{}).letter}function nn(e){return(S(e)||{}).acc}function rn(e){return(S(e)||{}).pc}function on(e){return(S(e)||{}).step}function un(e){return(S(e)||{}).alt}function sn(e){return(S(e)||{}).chroma}function an(e){return(S(e)||{}).oct}const cn=Object.freeze(Object.defineProperty({__proto__:null,acc:nn,alt:un,build:Be,chroma:sn,freq:en,letter:tn,midi:Re,oct:an,parse:S,pc:rn,regex:Ht,step:on},Symbol.toStringTag,{value:"Module"})),ln=at(cn);var re,ye;function fn(){if(ye)return re;ye=1;var e=ln;function t(r,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(r);this.nameToUrl=i||t.nameToUrl,this.ctx=r,this.instruments={},this.promises=[]}t.prototype.onready=function(r){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(r)},t.prototype.instrument=function(r,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c=this.ctx;if(r=r||"default",r in this.instruments)return this.instruments[r];var s={name:r,play:o(c,i)};if(this.instruments[r]=s,r!=="default"){var u=t.instrument(c,r,i).then(function(a){return s.play=a.play,s});this.promises.push(u),s.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(a)}}else s.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a()};return s};function n(r,i,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(r,i,c).then(function(s){return s.buffers})}t.loadBuffers=n;function o(r,i){return i=i||{},function(c,s,u,a){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var h=c>0&&c<129?+c:e.midi(c),d=h?e.midiToFreq(h,440):null;if(d){u=u||.2,a=a||{};var l=a.destination||i.destination||r.destination,f=a.vcoType||i.vcoType||"sine",m=a.gain||i.gain||.4,g=r.createOscillator();g.type=f,g.frequency.value=d;var _=r.createGain();return _.gain.value=m,g.connect(_),_.connect(l),g.start(s),u>0&&g.stop(s+u),g}}}return t.noteToMidi=e.midi,re=t,re}(function(e){var t=ht,n=It;function o(s,u,a){if(arguments.length===1)return function(m,g){return o(s,m,g)};var h=a||{},d=h.isSoundfontURL||r,l=h.nameToUrl||i,f=d(u)?u:l(u,h.soundfont,h.format);return t(s,f,{only:h.only||h.notes}).then(function(m){var g=n(s,m,h).connect(h.destination?h.destination:s.destination);return g.url=f,g.name=u,g})}function r(s){return/\.js(\?.*)?$/i.test(s)}function i(s,u,a){return a=a==="ogg"?a:"mp3",u=u==="FluidR3_GM"?u:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+u+"/"+s+"-"+a+".js"}var c=fn();c.instrument=o,c.nameToUrl=i,e.exports&&(e.exports=c),typeof window<"u"&&(window.Soundfont=c)})(Me);var dn=Me.exports;class hn{constructor(t,n){L(this,"sound",null);this.instrument=t,this.note=n}async start(){this.sound==null&&(this.sound=await this.instrument.play(this.note))}stop(){this.sound!=null&&(this.sound.stop(),this.sound=null)}}const be=12*4,oe=49,mn=1.7,le="80px",pn="4px";class vn{constructor(t=()=>{}){L(this,"instrument",null);this.initalizeCallback=t}async play(t){if(this.instrument==null){this.initalizeCallback();let n=new(window.AudioContext||window.webkitAudioContext);this.instrument=await dn.instrument(n,"acoustic_grand_piano");let o=n.createGain();return o.connect(n.destination),this.instrument.connect(o),o.gain.value=mn,null}else return this.instrument.play(t.toString())}}var W=(e=>(e.major="maj",e.minor="min",e.diminished="dim",e))(W||{});function gn(e,t){let n=[];switch(t){case"maj":n=[e,e+4,e+7];break;case"min":n=[e,e+3,e+7];break;case"dim":n=[e,e+3,e+6];break}n=n.map(r=>r%12+be);let o=[e%12+be-12];return n.concat(o)}class _e{constructor(t,n,o){L(this,"tones",[]);this.tones=gn(n,o).map(r=>new hn(t,r))}start(){this.tones.forEach(t=>t.start())}stop(){this.tones.forEach(t=>t.stop())}}function yn(e){let t,n,o,r,i,c,s,u,a,h;return{c(){t=M("button"),n=C(e[0]),o=q(),r=M("p"),i=C(e[1]),c=q(),s=M("p"),u=C(e[2]),T(r,"class","descriptionlabel svelte-12fjv3s"),T(r,"id","topDescriptionLabel"),T(s,"class","descriptionlabel svelte-12fjv3s"),T(s,"id","bottomDescriptionLabel"),T(t,"class","svelte-12fjv3s"),$(t,"background-color",e[3]?"#606060":"#404040"),$(t,"width",le),$(t,"height",le),$(t,"margin",pn)},m(d,l){J(d,t,l),w(t,n),w(t,o),w(t,r),w(r,i),w(t,c),w(t,s),w(s,u),a||(h=[te(t,"pointerdown",e[4]),te(t,"pointerup",e[5]),te(t,"pointerleave",e[5])],a=!0)},p(d,[l]){l&1&&Z(n,d[0]),l&2&&Z(i,d[1]),l&4&&Z(u,d[2]),l&8&&$(t,"background-color",d[3]?"#606060":"#404040")},i:k,o:k,d(d){d&&K(t),a=!1,U(h)}}}function bn(e,t,n){let{sound:o}=t,{shortcutKey:r}=t,{label:i}=t,{topDescriptionLabel:c=""}=t,{bottomDescriptionLabel:s=""}=t,u=!1;function a(){n(3,u=!0),o.start()}function h(){n(3,u=!1),o.stop()}function d(f){f.key===r&&a()}function l(f){f.key===r&&h()}return Ye(()=>(window.addEventListener("keydown",d),window.addEventListener("keyup",l),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",l),h()})),Ze(()=>{h()}),e.$$set=f=>{"sound"in f&&n(6,o=f.sound),"shortcutKey"in f&&n(7,r=f.shortcutKey),"label"in f&&n(0,i=f.label),"topDescriptionLabel"in f&&n(1,c=f.topDescriptionLabel),"bottomDescriptionLabel"in f&&n(2,s=f.bottomDescriptionLabel)},[i,c,s,u,a,h,o,r]}class _n extends H{constructor(t){super(),X(this,t,bn,yn,I,{sound:6,shortcutKey:7,label:0,topDescriptionLabel:1,bottomDescriptionLabel:2})}}function wn(e){return(7*(e+3)%12).toString()}function An(e){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]}function we(e,t,n){const o=e.slice();return o[5]=t[n],o[7]=n,o}function Ae(e){let t,n;return t=new _n({props:{label:wn(e[3](e[7])),topDescriptionLabel:An(e[3](e[7])),bottomDescriptionLabel:`press ${e[5]}`,sound:new _e(e[2],e[3](e[7]),e[0]),shortcutKey:e[5]}}),{c(){R(t.$$.fragment)},m(o,r){P(t,o,r),n=!0},p(o,r){const i={};r&2&&(i.bottomDescriptionLabel=`press ${o[5]}`),r&5&&(i.sound=new _e(o[2],o[3](o[7]),o[0])),r&2&&(i.shortcutKey=o[5]),t.$set(i)},i(o){n||(A(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){j(t,o)}}}function Tn(e){let t,n,o=e[0].toString()+"",r,i,c,s=me(e[1]),u=[];for(let h=0;h<s.length;h+=1)u[h]=Ae(we(e,s,h));const a=h=>E(u[h],1,1,()=>{u[h]=null});return{c(){t=M("div"),n=M("h1"),r=C(o),i=q();for(let h=0;h<u.length;h+=1)u[h].c();$(n,"width",le),T(t,"class","button-row svelte-14vrr43")},m(h,d){J(h,t,d),w(t,n),w(n,r),w(t,i);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(t,null);c=!0},p(h,[d]){if((!c||d&1)&&o!==(o=h[0].toString()+"")&&Z(r,o),d&15){s=me(h[1]);let l;for(l=0;l<s.length;l+=1){const f=we(h,s,l);u[l]?(u[l].p(f,d),A(u[l],1)):(u[l]=Ae(f),u[l].c(),A(u[l],1),u[l].m(t,null))}for(rt(),l=s.length;l<u.length;l+=1)a(l);ot()}},i(h){if(!c){for(let d=0;d<s.length;d+=1)A(u[d]);c=!0}},o(h){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)E(u[d]);c=!1},d(h){h&&K(t),Xe(u,h)}}}function Sn(e,t,n){let{startTone:o}=t,{chrdType:r}=t,{shortcutKeys:i}=t,{instrument:c}=t;function s(u){return o+7*u}return e.$$set=u=>{"startTone"in u&&n(4,o=u.startTone),"chrdType"in u&&n(0,r=u.chrdType),"shortcutKeys"in u&&n(1,i=u.shortcutKeys),"instrument"in u&&n(2,c=u.instrument)},[r,i,c,s,o]}class ie extends H{constructor(t){super(),X(this,t,Sn,Tn,I,{startTone:4,chrdType:0,shortcutKeys:1,instrument:2})}}function $n(e){let t;return{c(){t=M("h1"),t.textContent="audio activates...",T(t,"class","svelte-5fc3z"),$(t,"opacity",e[0]?1:0)},m(n,o){J(n,t,o)},p(n,[o]){o&1&&$(t,"opacity",n[0]?1:0)},i:k,o:k,d(n){n&&K(t)}}}function En(e,t,n){let{showAudioActivate:o}=t;return e.$$set=r=>{"showAudioActivate"in r&&n(0,o=r.showAudioActivate)},[o]}class Mn extends H{constructor(t){super(),X(this,t,En,$n,I,{showAudioActivate:0})}}function kn(e){let t,n,o,r,i,c,s,u,a,h;function d(f){e[2](f)}let l={};return e[0]!==void 0&&(l.showAudioActivate=e[0]),n=new Mn({props:l}),ue.push(()=>it(n,"showAudioActivate",d)),i=new ie({props:{startTone:oe,shortcutKeys:["q","w","e","r","t","z","u","i","o","p","ü"],chrdType:W.major,instrument:e[1]}}),s=new ie({props:{startTone:oe+9,shortcutKeys:["a","s","d","f","g","h","j","k","l","ö","ä"],chrdType:W.minor,instrument:e[1]}}),a=new ie({props:{startTone:oe+2*9,shortcutKeys:["y","x","c","v","b","n","m",",",".","-","_"],chrdType:W.diminished,instrument:e[1]}}),{c(){t=M("main"),R(n.$$.fragment),r=q(),R(i.$$.fragment),c=q(),R(s.$$.fragment),u=q(),R(a.$$.fragment),T(t,"class","svelte-10qjjto")},m(f,m){J(f,t,m),P(n,t,null),w(t,r),P(i,t,null),w(t,c),P(s,t,null),w(t,u),P(a,t,null),h=!0},p(f,[m]){const g={};!o&&m&1&&(o=!0,g.showAudioActivate=f[0],et(()=>o=!1)),n.$set(g)},i(f){h||(A(n.$$.fragment,f),A(i.$$.fragment,f),A(s.$$.fragment,f),A(a.$$.fragment,f),h=!0)},o(f){E(n.$$.fragment,f),E(i.$$.fragment,f),E(s.$$.fragment,f),E(a.$$.fragment,f),h=!1},d(f){f&&K(t),j(n),j(i),j(s),j(a)}}}function xn(e,t,n){let o=!1;function r(){n(0,o=!0),setTimeout(()=>{n(0,o=!1)},1e3)}let i=new vn(r);function c(s){o=s,n(0,o)}return[o,i,c]}class On extends H{constructor(t){super(),X(this,t,xn,kn,I,{})}}function Pn(e){let t,n,o;return n=new On({}),{c(){t=M("main"),R(n.$$.fragment),T(t,"class","svelte-zs3zob")},m(r,i){J(r,t,i),P(n,t,null),o=!0},p:k,i(r){o||(A(n.$$.fragment,r),o=!0)},o(r){E(n.$$.fragment,r),o=!1},d(r){r&&K(t),j(n)}}}class jn extends H{constructor(t){super(),X(this,t,null,Pn,I,{})}}getComputedStyle(document.body).getPropertyValue("background-color");new jn({target:document.body});
